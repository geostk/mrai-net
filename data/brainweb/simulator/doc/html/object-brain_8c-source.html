<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIMRI3D: object-brain.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>object-brain.c</h1><a href="object-brain_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*************************************************************************</span>
00002 <span class="comment">* $Id: object-brain.c,v 1.8 2006/12/18 15:10:37 yougz Exp $</span>
00003 <span class="comment">**************************************************************************</span>
00004 <span class="comment"> This software is governed by the CeCILL  license under French law and</span>
00005 <span class="comment">  abiding by the rules of distribution of free software.  You can  use, </span>
00006 <span class="comment">  modify and/ or redistribute the software under the terms of the CeCILL</span>
00007 <span class="comment">  license as circulated by CEA, CNRS and INRIA at the following URL</span>
00008 <span class="comment">  "http://www.cecill.info". </span>
00009 <span class="comment">  </span>
00010 <span class="comment">  As a counterpart to the access to the source code and  rights to copy,</span>
00011 <span class="comment">  modify and redistribute granted by the license, users are provided only</span>
00012 <span class="comment">  with a limited warranty  and the software's author,  the holder of the</span>
00013 <span class="comment">  economic rights,  and the successive licensors  have only  limited</span>
00014 <span class="comment">  liability. </span>
00015 <span class="comment">  </span>
00016 <span class="comment">  In this respect, the user's attention is drawn to the risks associated</span>
00017 <span class="comment">  with loading,  using,  modifying and/or developing or reproducing the</span>
00018 <span class="comment">  software by the user in light of its specific status of free software,</span>
00019 <span class="comment">  that may mean  that it is complicated to manipulate,  and  that  also</span>
00020 <span class="comment">  therefore means  that it is reserved for developers  and  experienced</span>
00021 <span class="comment">  professionals having in-depth computer knowledge. Users are therefore</span>
00022 <span class="comment">  encouraged to load and test the software's suitability as regards their</span>
00023 <span class="comment">  requirements in conditions enabling the security of their systems and/or </span>
00024 <span class="comment">  data to be ensured and,  more generally, to use and operate it in the </span>
00025 <span class="comment">  same conditions as regards security. </span>
00026 <span class="comment">  </span>
00027 <span class="comment">  The fact that you are presently reading this means that you have had</span>
00028 <span class="comment">  knowledge of the CeCILL license and that you accept its terms.</span>
00029 <span class="comment">  </span>
00030 <span class="comment">  Copyright (c) CREATIS (Centre de Recherche et d'Applications en Traitement de</span>
00031 <span class="comment">  l'Image). All rights reserved. See License.txt for details.</span>
00032 <span class="comment">  </span>
00033 <span class="comment">  Version 2.0  20/12/2006</span>
00034 <span class="comment">*************************************************************************/</span>
00035 <span class="preprocessor">#include "<a class="code" href="object-brain_8h.html">object-brain.h</a>"</span>
00036 <span class="preprocessor">#include &lt;<a class="code" href="idseq_8h.html">idseq.h</a>&gt;</span>
00037 <span class="preprocessor">#include &lt;<a class="code" href="idacr_8h.html">idacr.h</a>&gt;</span>
00038 <span class="preprocessor">#include &lt;string.h&gt;</span>
00039 <span class="preprocessor">#include &lt;<a class="code" href="idvol_8h.html">idvol.h</a>&gt;</span>
00040 <span class="preprocessor">#include &lt;<a class="code" href="idima_8h.html">idima.h</a>&gt;</span>
00041 <span class="preprocessor">#include "<a class="code" href="display_8h.html">display.h</a>"</span>
00042 <span class="preprocessor">#include "<a class="code" href="noise_8h.html">noise.h</a>"</span>
00043 
<a name="l00054"></a><a class="code" href="group__Object.html#ga0">00054</a> <a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a> <a class="code" href="group__Object.html#ga0">ReadLabelVolume</a>(<span class="keywordtype">char</span> * filein,<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">int</span> z)
00055 {
00056  <a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a> label;
00057      
00058  label = (<a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>) <a class="code" href="volrdf_8c.html#a1">IdVolReadRawFile</a>(filein,<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,<a class="code" href="idvol-ido_8h.html#a1">VOL_UCHAR</a>);
00059  <span class="keywordflow">if</span> (!label)
00060  {
00061   printf(<span class="stringliteral">"Unable to read %s \n"</span>,filein);
00062   exit(0);
00063  }
00064 
00065  <span class="keywordflow">return</span> label;
00066 }
00067 
<a name="l00080"></a><a class="code" href="group__Object.html#ga3">00080</a> <a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a> <a class="code" href="group__Object.html#ga3">GetVolumeVOI</a>(PPPVOLUME_UCHAR label,<span class="keywordtype">int</span> px,<span class="keywordtype">int</span> py,<span class="keywordtype">int</span> pz,<span class="keywordtype">int</span> dimx,<span class="keywordtype">int</span> dimy,<span class="keywordtype">int</span> dimz)
00081 {
00082  <a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a> vol;
00083  <span class="keywordtype">int</span> i,j,k;
00084  
00085  vol = (<a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>) <a class="code" href="volallo_8c.html#a1">IdVolAlloc</a>(dimx,dimy,dimz,<a class="code" href="idvol-ido_8h.html#a1">VOL_UCHAR</a>);
00086  <span class="keywordflow">for</span> (k=0;k&lt;dimz;k++) <span class="keywordflow">for</span> (j=0;j&lt;dimy;j++) <span class="keywordflow">for</span> (i=0;i&lt;dimx;i++)
00087     vol[k][j][i]=label[k+pz][j+py][i+px];
00088 
00089  <span class="keywordflow">return</span> vol;
00090 }
00091 
<a name="l00101"></a><a class="code" href="group__Object.html#ga1">00101</a> <a class="code" href="object_8h.html#a7">OBJECT3D</a>* <a class="code" href="group__Object.html#ga1">LabelToObject</a>(PPPVOLUME_UCHAR label, PPIMAGE_FLOAT value)
00102 {
00103  <span class="keywordtype">int</span> <a class="code" href="jerror_8h.html#a52a35">x</a>,y,z;
00104  <span class="keywordtype">int</span> ro,t1,t2,lab;
00105  <a class="code" href="object_8h.html#a7">OBJECT3D</a> *<a class="code" href="jmemsys_8h.html#a3">object</a>;
00106  <span class="keywordtype">int</span> i,j,k;
00107 
00108  <a class="code" href="jerror_8h.html#a52a35">x</a>=<a class="code" href="idvol-ido_8h.html#a21">IdVolDimX</a>(label);
00109  y=<a class="code" href="idvol-ido_8h.html#a22">IdVolDimY</a>(label);
00110  z=<a class="code" href="idvol-ido_8h.html#a23">IdVolDimZ</a>(label);
00111 
00112  <a class="code" href="jmemsys_8h.html#a3">object</a> = <a class="code" href="group__Object.html#ga10">AllocObject</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,1,3);
00113 
00114  <span class="keywordflow">for</span> (k=0;k&lt;z;k++) <span class="keywordflow">for</span> (j=0;j&lt;y;j++) <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)
00115  {
00116    lab=label[k][j][i];
00117    ro=(<span class="keywordtype">int</span>) (value[lab][0]+<a class="code" href="noise_8h.html#a0">RandGaussian</a>(value[lab][1],0.0,0));
00118    t1=(<span class="keywordtype">int</span>) (value[lab][2]+<a class="code" href="noise_8h.html#a0">RandGaussian</a>(value[lab][3],0.0,0));
00119    t2=(<span class="keywordtype">int</span>) (value[lab][4]+<a class="code" href="noise_8h.html#a0">RandGaussian</a>(value[lab][5],0.0,0));
00120    <a class="code" href="group__Object.html#ga19">SetObjectPoint</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>,i,j,k,ro,t1,t2,<a class="code" href="object_8h.html#a0">WATER</a>);
00121  }
00122  <span class="keywordflow">return</span> <a class="code" href="jmemsys_8h.html#a3">object</a>;
00123 }
00124 
<a name="l00145"></a><a class="code" href="group__Object.html#ga2">00145</a> <a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a> <a class="code" href="group__Object.html#ga2">GetBrainPhysicalValues</a>(<span class="keywordtype">double</span> B0)
00146 {
00147  <span class="keywordtype">int</span> i,j;
00148  <a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a> value;
00149  value = (<a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(8,10,<a class="code" href="idima-ido_8h.html#a6">IMA_FLOAT</a>);
00150  <span class="keywordflow">for</span> (j=0;j&lt;10;j++) <span class="keywordflow">for</span> (i=0;i&lt;8;i++) 
00151     value[j][i]=0.0;
00152 
00153  <span class="comment">/* Value for B0 = 1T */</span>
00154  <span class="comment">/* Air */</span>
00155  value[0][0]=0.0; value[0][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00156  value[0][2]=0.0; value[0][3]=0.0; <span class="comment">/* T1 , T1 sd */</span>
00157  value[0][4]=0.0; value[0][5]=0.0; <span class="comment">/* T2 , T2 sd */</span>
00158  value[0][6]=0.0; value[0][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00159  <span class="comment">/* CSF */</span>
00160  value[1][0]=100.0;    value[1][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00161  value[1][2]=2569.0;   value[1][3]=170.0; <span class="comment">/* T1 , T1 sd */</span>
00162  value[1][4]=329.0;    value[1][5]=13.0; <span class="comment">/* T2 , T2 sd */</span>
00163  value[1][6]=-9.05e-6; value[1][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00164  <span class="comment">/* Grey Matter */</span>
00165  value[2][0]=86.0;     value[2][1]=0.4; <span class="comment">/* Ro , Ro sd */</span>
00166  value[2][2]=833.0;    value[2][3]=40.0; <span class="comment">/* T1 , T1 sd */</span>
00167  value[2][4]=83.0;     value[2][5]=8.0; <span class="comment">/* T2 , T2 sd */</span>
00168  value[2][6]=-9.05e-6; value[2][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00169  <span class="comment">/* White Matter */</span>
00170  value[3][0]=77.0;    value[3][1]=3.00; <span class="comment">/* Ro , Ro sd */</span>
00171  value[3][2]=500.0;   value[3][3]=23.0; <span class="comment">/* T1 , T1 sd */</span>
00172  value[3][4]=70.0;    value[3][5]=3.0; <span class="comment">/* T2 , T2 sd */</span>
00173  value[3][6]=-9.5e-6; value[3][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00174   <span class="comment">/* Fat */</span>
00175  value[4][0]=100.0;    value[4][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00176  value[4][2]=350.0;    value[4][3]=0.0; <span class="comment">/* T1 , T1 sd */</span>
00177  value[4][4]=70.0;     value[4][5]=0.0; <span class="comment">/* T2 , T2 sd */</span>
00178  value[4][6]=-7.5e-6;  value[4][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00179  <span class="comment">/* Muscle */</span>
00180  value[5][0]=100.0;   value[5][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00181  value[5][2]=900.0;   value[5][3]=0.0; <span class="comment">/* T1 , T1 sd */</span>
00182  value[5][4]=47.0;    value[5][5]=0.0; <span class="comment">/* T2 , T2 sd */</span>
00183  value[5][6]=-9.5e-6; value[5][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00184  <span class="comment">/* Skin */</span>
00185  value[6][0]=100.0;    value[6][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00186  value[6][2]=2569.0;   value[6][3]=0.0; <span class="comment">/* T1 , T1 sd */</span>
00187  value[6][4]=329.0;    value[6][5]=0.0; <span class="comment">/* T2 , T2 sd */</span>
00188  value[6][6]=-9.05e-6; value[6][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00189  <span class="comment">/* Skull */</span>
00190  value[7][0]=0.0;      value[7][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00191  value[7][2]=0.0;      value[7][3]=0.0; <span class="comment">/* T1 , T1 sd */</span>
00192  value[7][4]=0.0;      value[7][5]=0.0; <span class="comment">/* T2 , T2 sd */</span>
00193  value[7][6]=-8.86e-6; value[7][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00194  <span class="comment">/* Glial Matter */</span>
00195  value[8][0]=86.0;     value[8][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00196  value[8][2]=833.0;    value[8][3]=0.0; <span class="comment">/* T1 , T1 sd */</span>
00197  value[8][4]=83.0;     value[8][5]=0.0; <span class="comment">/* T2 , T2 sd */</span>
00198  value[8][6]=-9.05e-6; value[8][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00199  <span class="comment">/* Connective */</span>
00200  value[9][0]=77.0;     value[9][1]=0.0; <span class="comment">/* Ro , Ro sd */</span>
00201  value[9][2]=500.0;    value[9][3]=0.0; <span class="comment">/* T1 , T1 sd */</span>
00202  value[9][4]=70.0;     value[9][5]=0.0; <span class="comment">/* T2 , T2 sd */</span>
00203  value[9][6]=-9.05e-6; value[9][7]=0.0; <span class="comment">/* Ki , Ki sd */</span>
00204 
00205 <span class="keywordflow">return</span> (value);
00206 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 20 14:28:14 2006 for SIMRI3D by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
