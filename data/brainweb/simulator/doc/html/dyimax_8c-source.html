<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIMRI3D: dyimax.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>dyimax.c</h1><a href="dyimax_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*************************************************************************</span>
00002 <span class="comment">* $Id: dyimax.c,v 1.2 2005/09/09 14:59:14 yougz Exp $</span>
00003 <span class="comment">**************************************************************************</span>
00004 <span class="comment"> This software is governed by the CeCILL  license under French law and</span>
00005 <span class="comment">  abiding by the rules of distribution of free software.  You can  use, </span>
00006 <span class="comment">  modify and/ or redistribute the software under the terms of the CeCILL</span>
00007 <span class="comment">  license as circulated by CEA, CNRS and INRIA at the following URL</span>
00008 <span class="comment">  "http://www.cecill.info". </span>
00009 <span class="comment">  </span>
00010 <span class="comment">  As a counterpart to the access to the source code and  rights to copy,</span>
00011 <span class="comment">  modify and redistribute granted by the license, users are provided only</span>
00012 <span class="comment">  with a limited warranty  and the software's author,  the holder of the</span>
00013 <span class="comment">  economic rights,  and the successive licensors  have only  limited</span>
00014 <span class="comment">  liability. </span>
00015 <span class="comment">  </span>
00016 <span class="comment">  In this respect, the user's attention is drawn to the risks associated</span>
00017 <span class="comment">  with loading,  using,  modifying and/or developing or reproducing the</span>
00018 <span class="comment">  software by the user in light of its specific status of free software,</span>
00019 <span class="comment">  that may mean  that it is complicated to manipulate,  and  that  also</span>
00020 <span class="comment">  therefore means  that it is reserved for developers  and  experienced</span>
00021 <span class="comment">  professionals having in-depth computer knowledge. Users are therefore</span>
00022 <span class="comment">  encouraged to load and test the software's suitability as regards their</span>
00023 <span class="comment">  requirements in conditions enabling the security of their systems and/or </span>
00024 <span class="comment">  data to be ensured and,  more generally, to use and operate it in the </span>
00025 <span class="comment">  same conditions as regards security. </span>
00026 <span class="comment">  </span>
00027 <span class="comment">  The fact that you are presently reading this means that you have had</span>
00028 <span class="comment">  knowledge of the CeCILL license and that you accept its terms.</span>
00029 <span class="comment">  </span>
00030 <span class="comment">  Copyright (c) CREATIS (Centre de Recherche et d'Applications en Traitement de</span>
00031 <span class="comment">  l'Image). All rights reserved. See License.txt for details.</span>
00032 <span class="comment">  </span>
00033 <span class="comment">  Version 1.0  05/09/2005</span>
00034 <span class="comment">*************************************************************************/</span>
00035 
00036 <span class="comment">/*************************************************************************</span>
00037 <span class="comment">*</span>
00038 <span class="comment">*  Description : Affichage d'une image dans une fenetre X ecran 24 bits</span>
00039 <span class="comment">*     L'ancienne version (conservee dans DYIMAXOLD.C) marchait partout </span>
00040 <span class="comment">*     sauf sous les LINUX 'actuels'</span>
00041 <span class="comment">*     (probleme d'incompatibilite entre X11R5 et X11R6 ?)</span>
00042 <span class="comment">*     De maniere tres goret, j'ai traite toute image 8 bits comme une image 24 bits</span>
00043 <span class="comment">*     mon probleme etant d'avoir un affichage.</span>
00044 <span class="comment">*     Sur les ecrans 8 bits, (SUN3, SUN4, et c'est tout) j'appele l'ancienne fonction.</span>
00045 <span class="comment">*</span>
00046 <span class="comment">**************************************************************************/</span>
00047 
<a name="l00048"></a><a class="code" href="dyimax_8c.html#a0">00048</a> <span class="preprocessor">#define DEBUG 0</span>
00049 <span class="preprocessor"></span>
00050 <span class="preprocessor">#ifdef HAVE_X11</span>
00051 <span class="preprocessor"></span>
00052 <span class="preprocessor">#include &lt;string.h&gt;</span>  <span class="comment">// For memcpy</span>
00053 <span class="preprocessor">#include &lt;math.h&gt;</span>
00054 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00055 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00056 <span class="preprocessor">#include "<a class="code" href="iderr_8h.html">iderr.h</a>"</span>
00057 <span class="preprocessor">#include "<a class="code" href="idima_8h.html">idima.h</a>"</span>
00058 <span class="preprocessor">#include "<a class="code" href="idprint_8h.html">idprint.h</a>"</span>
00059 
00060 <span class="preprocessor">#include &lt;X11/Xlib.h&gt;</span>
00061 <span class="preprocessor">#include &lt;X11/Xutil.h&gt;</span>
00062 <span class="preprocessor">#include &lt;X11/Xos.h&gt;</span>
00063 <span class="preprocessor">#include &lt;X11/Xatom.h&gt;</span>
00064 
00065 <span class="preprocessor">#define RGB24BITS_SW 4</span>
00066 <span class="preprocessor"></span><span class="preprocessor">#define RGB24BITS_NW 5</span>
00067 <span class="preprocessor"></span><span class="preprocessor">#define COLORS256_SW 2</span>
00068 <span class="preprocessor"></span><span class="preprocessor">#define COLORS256_NW 3</span>
00069 <span class="preprocessor"></span>
00070 
00071 <span class="keyword">static</span> Display *disp;
00072 <span class="keyword">static</span> Visual *vis;
00073 <span class="keyword">static</span> <span class="keywordtype">int</span> screen_num;
00074 <span class="keyword">static</span> Window win;
00075 
00076 <span class="keyword">static</span> XImage *xim=NULL;
00077 <span class="keyword">static</span> GC gc;
00078 <span class="keyword">static</span> XGCValues <a class="code" href="jpeglib_8h.html#a64">val</a>;
00079 
00080 <span class="keyword">static</span> XEvent rep;
00081 <span class="keyword">static</span> Colormap cm;
00082 
00083 
00084 <span class="keyword">static</span> <span class="keywordtype">char</span> * imm1;
00085 <span class="keyword">static</span> <span class="keywordtype">int</span> fdp[2];
00086 <span class="keyword">static</span> <span class="keywordtype">int</span> fork_done=0;
00087 
00088 <span class="keyword">static</span> XVisualInfo vTemplate;
00089 <span class="keyword">static</span> XVisualInfo *visualList;
00090 <span class="keyword">static</span> <span class="keywordtype">int</span> visualsMatched;
00091 <span class="keyword">static</span> XSetWindowAttributes attributs;
00092 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> valuemask=0 <span class="comment">/*,pixels[2048] */</span>;
00093 <span class="keyword">static</span> <span class="keywordtype">int</span> num_visual;
00094 <span class="keyword">static</span> <a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a> imUCHAR;
00095 <span class="keyword">static</span> <a class="code" href="structRGB.html">PPIMAGE_RGB</a> imRGB;
00096 
00097 <span class="comment">/*void _IdImaDisplayColorOld(PPIMAGE_UCHAR ,</span>
00098 <span class="comment">                    int , </span>
00099 <span class="comment">         int , int , int , int ,</span>
00100 <span class="comment">         int , int , PSIGNAL_RGB);</span>
00101 <span class="comment">*/</span>
00102 <span class="keywordtype">void</span> <a class="code" href="idima-restricted_8h.html#a2">_IdImaDisplayColor</a>(PPIMAGE_UCHAR im,
00103                         <span class="keywordtype">int</span> display, <span class="comment">// Displays in same window when even</span>
00104                          <span class="comment">// and in newly created window when odd</span>
00105          <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> nx, <span class="keywordtype">int</span> ny,
00106          <span class="keywordtype">int</span> ox, <span class="keywordtype">int</span> oy, <a class="code" href="structRGB.html">PSIGNAL_RGB</a> pal)
00107 {
00108    <span class="keywordtype">int</span> i,j,k,kkk=0;
00109    <span class="keywordtype">int</span> lig,v;
00110    <span class="keywordtype">int</span> FlagSameWindow=0;
00111    
00112    <span class="keywordflow">if</span> (!im) {
00113    <a class="code" href="kerprint_8c.html#a5">IdErrPrintf</a>(<span class="stringliteral">"Pointeur image NULL !!\n"</span>); 
00114    <span class="keywordflow">return</span>;
00115    }
00116    
00117    FlagSameWindow=display&amp;0x0001; 
00118    
00119    <span class="keywordflow">if</span>(!FlagSameWindow) {  <span class="comment">/* si PAIR meme fenetre */</span>
00120    
00121       <span class="keywordflow">if</span>(!fork_done) {
00122          pipe(fdp);
00123          fork_done=1;
00124          fcntl(fdp[0],F_SETFL,O_NDELAY);
00125    
00126          <span class="keywordflow">if</span>(fork())<span class="keywordflow">return</span>;
00127 
00128       } <span class="keywordflow">else</span> {
00129          <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(im))   { 
00130             
00131             <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>: 
00132                <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im);i++)
00133                   write(fdp[1],im[i],<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im));
00134                <span class="keywordflow">return</span>;
00135             
00136             <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a9">IMA_RGB</a>:      
00137                <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im);i++) 
00138                   write(fdp[1],im[i],<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im)*3);
00139                <span class="keywordflow">return</span>; 
00140          } 
00141       }
00142 
00143    } <span class="keywordflow">else</span> {  <span class="comment">/* si IMPAIR nouvelle fenetre */</span>
00144 
00145    <span class="keywordflow">if</span> (fork()) 
00146       <span class="keywordflow">return</span>; 
00147   }
00148    
00149    <span class="keywordflow">if</span>(!(disp=XOpenDisplay(0))) {
00150       <a class="code" href="kerprint_8c.html#a4">IdPrintf</a>(<span class="stringliteral">"Pb de display (XOpenDisplay)\n"</span>);
00151    <span class="keywordflow">return</span>;
00152    }
00153    screen_num=DefaultScreen(disp);
00154    
00155    
00156    <span class="comment">/**************************************************************************/</span>
00157    <span class="comment">/* Affichage en d'une image RGB sur ecran 24 bits en TRUE-COLOR           */</span>
00158    <span class="comment">/**************************************************************************/</span>
00159    
00160      vTemplate.depth=24;
00161      visualList=XGetVisualInfo(disp,VisualScreenMask | VisualDepthMask,     
00162          &amp;vTemplate,&amp;visualsMatched);
00163    
00164    <span class="keywordflow">if</span>( visualsMatched == 0 )  {
00165             <span class="comment">//im=eclate_24_8((PPIMAGE_RGB)im);</span>
00166 
00167        <a class="code" href="idima-restricted_8h.html#a3">_IdImaDisplayColorOld</a>( im,   <span class="comment">//juste pour continuer a afficher sur des ecrans 8 bits</span>
00168                          display,      <span class="comment">// sans se casser la tete                 </span>
00169           <a class="code" href="jerror_8h.html#a52a35">x</a>,  y,  nx,  ny,
00170           ox,  oy,  pal);
00171          <span class="keywordflow">return</span>;
00172    } <span class="keywordflow">else</span> {
00173             <span class="keywordflow">while</span>(visualList[num_visual].class != TrueColor ) {
00174             num_visual++;
00175 
00176             <span class="keywordflow">if</span> ( num_visual &gt;= visualsMatched) {
00177                   <a class="code" href="kerprint_8c.html#a5">IdErrPrintf</a>(<span class="stringliteral">"Votre serveur ne permet pas d'afficher en TRUE_COLOR"</span>);
00178                   <a class="code" href="iderr_8h.html#a66">IdExit</a>(1);
00179          }
00180       }
00181         }
00182 
00183      cm = XCreateColormap(disp,RootWindow(disp,screen_num),
00184                 visualList[num_visual].visual,AllocNone);
00185      attributs.colormap = cm;
00186      attributs.event_mask= ButtonPressMask | KeyPressMask | ExposureMask;
00187      attributs.background_pixel=BlackPixel(disp,screen_num);
00188      attributs.border_pixel=WhitePixel(disp,screen_num);
00189      vis=visualList[num_visual].visual;
00190      valuemask |= CWColormap;
00191      valuemask |= CWEventMask;
00192      valuemask |= CWBackPixel;
00193      valuemask |= CWBorderPixel;
00194      win=XCreateWindow(disp,RootWindow(disp,screen_num),
00195           0,0,<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im),50,vTemplate.depth,
00196           InputOutput,visualList[num_visual].visual,valuemask,&amp;attributs);
00197      <span class="keywordflow">if</span>(!win) <a class="code" href="kerprint_8c.html#a5">IdErrPrintf</a>(<span class="stringliteral">"Erreur creation fenetre \n"</span>);
00198      XSetWindowColormap(disp,win,cm);
00199      XClearWindow(disp,win);
00200      XStoreName(disp,win,<a class="code" href="kernomfic_8c.html#a0">IdGetFileName</a>(im));
00201      imm1=(<span class="keywordtype">char</span> *)malloc(<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im)*<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im)*4);
00202      
00203      
00204     <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(im))  {
00205     
00206      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a9">IMA_RGB</a>: 
00207      imRGB=(<a class="code" href="structRGB.html">PPIMAGE_RGB</a>)im;
00208    
00209      <span class="keywordflow">for</span>(i=0,k=0;i&lt;<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im);i++)
00210       <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im);j++,k+=4) {
00211       <span class="comment">/*</span>
00212 <span class="comment">            imm1[k]  =0; </span>
00213 <span class="comment">            imm1[k+1]=imRGB[i][j].b;</span>
00214 <span class="comment">            imm1[k+2]=imRGB[i][j].g;</span>
00215 <span class="comment">            imm1[k+3]=imRGB[i][j].r;</span>
00216 <span class="comment">         */</span>
00217       imm1[k]  =imRGB[i][j].<a class="code" href="structRGB.html#o2">b</a>; 
00218       imm1[k+1]=imRGB[i][j].g;
00219       imm1[k+2]=imRGB[i][j].r;
00220       imm1[k+3]=0;
00221          }
00222          
00223       <span class="keywordflow">break</span>;
00224       
00225       <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>:
00226       
00227       imUCHAR=(<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>)im;
00228       <span class="keywordflow">if</span> (!pal)
00229             <span class="keywordflow">for</span>(i=0,k=0;i&lt;<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im);i++)
00230          <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im);j++,k+=4) {
00231          imm1[k]  = imm1[k+1] = imm1[k+2] = imUCHAR[i][j]; 
00232                imm1[k+3]=0;
00233             } 
00234       <span class="keywordflow">else</span>
00235                <span class="keywordflow">for</span>(i=0,k=0;i&lt;<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im);i++)
00236          <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im);j++,k+=4) {  
00237          
00238          imm1[k]  =pal[imUCHAR[i][j]].<a class="code" href="structRGB.html#o2">b</a>; 
00239          imm1[k+1]=pal[imUCHAR[i][j]].g;
00240          imm1[k+2]=pal[imUCHAR[i][j]].r;
00241                imm1[k+3]=0;
00242             } 
00243                
00244    <span class="keywordflow">break</span>;
00245    
00246       <span class="keywordflow">default</span>:
00247    
00248          <a class="code" href="kerprint_8c.html#a5">IdErrPrintf</a>(<span class="stringliteral">"type d'image (%04x) non autorise a l'affichage\n"</span>,
00249          <a class="code" href="imabasic_8c.html#a7">IdImaType</a>(im));
00250          <a class="code" href="iderr_8h.html#a66">IdExit</a>(1);
00251 
00252          <span class="keywordflow">break</span>;
00253    }
00254     
00255     
00256         xim=XCreateImage(disp,vis,24,ZPixmap,0,(<span class="keywordtype">char</span> *)imm1,
00257       <a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im),16,<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im)*4);
00258      <span class="keywordflow">if</span>(!xim)
00259       <a class="code" href="kerprint_8c.html#a5">IdErrPrintf</a>(<span class="stringliteral">"erreur creation image\n"</span>);
00260       
00261       
00262    <span class="comment">/*************************************************************************/</span>
00263    <span class="comment">/* Partie commune affichage des images xim                               */</span>
00264    <span class="comment">/*************************************************************************/</span>
00265    
00266    gc=XCreateGC(disp,win,(GCForeground|GCBackground),&amp;<a class="code" href="jpeglib_8h.html#a64">val</a>);
00267    
00268    XMapWindow(disp,win);
00269    XSelectInput(disp,win,ButtonPressMask | KeyPressMask | ExposureMask);
00270    XPutImage(disp,win,gc,xim,0,0,0,0,<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im));
00271    lig=0;
00272    <span class="keywordflow">while</span>(1)
00273       {
00274       <span class="keywordflow">if</span>( XEventsQueued(disp,QueuedAfterFlush) || display) {
00275          
00276          XNextEvent(disp,&amp;rep);
00277          <span class="keywordflow">switch</span>(rep.type) {
00278             <span class="keywordflow">case</span> ButtonPress:
00279                      <span class="keywordflow">if</span>( rep.xbutton.button == 1) {
00280                         XPutImage(disp,win,gc,xim,0,0,0,
00281                               0,<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im));
00282                         XFreeGC(disp,gc);
00283                         XCloseDisplay(disp);
00284                         <a class="code" href="iderr_8h.html#a66">IdExit</a>(0); 
00285                }  
00286                         <span class="keywordflow">break</span>;
00287 
00288                     <span class="keywordflow">case</span> Expose:
00289                XPutImage(disp,win,gc,xim,0,0,
00290                   0,0,<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im));
00291                <span class="keywordflow">break</span>;
00292 
00293             <span class="keywordflow">case</span> KeyPress:
00294                XPutImage(disp,win,gc,xim,0,0,
00295                   0,0,<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im));
00296                <span class="keywordflow">break</span>;
00297             }
00298       } <span class="keywordflow">else</span> {
00299          <span class="keywordflow">switch</span> (<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(im)) {
00300          
00301    
00302                <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a> :
00303                     <span class="comment">/*---------------*/</span>
00304             
00305                <span class="keywordflow">if</span>( (v=read(fdp[0],im[lig],<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im))) != -1) {
00306             
00307                <span class="keywordflow">if</span>(v) {
00308                
00309                   <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im);j++,kkk+=4) {
00310                
00311                      imm1[kkk]  = imm1[kkk+1] = imm1[kkk+2] = imUCHAR[lig][j]; 
00312                         imm1[kkk+3]=0;    
00313                      }
00314                   lig++;
00315                }
00316                <span class="keywordflow">if</span>(lig==<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im)) {
00317                
00318                   lig=0;
00319                   kkk=0;
00320                   XPutImage(disp,win,gc,xim,0,0,0,0,
00321                      <a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im));
00322                }
00323             } <span class="comment">/* fin if v=read(fdp... */</span>
00324          
00325             <span class="keywordflow">break</span>;   
00326             
00327                            
00328             <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a9">IMA_RGB</a>:
00329                  <span class="comment">/*-------------*/</span>
00330    
00331             <span class="keywordflow">if</span>( (v=read(fdp[0],im[lig],<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im)*3)) != -1) {
00332             
00333                <span class="keywordflow">if</span>(v) {
00334                
00335                   <span class="keywordflow">for</span>(j=0;j&lt;<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im);j++,kkk+=4) {
00336                   
00337                      <span class="comment">/*</span>
00338 <span class="comment">                        imm1[kkk]  =0; </span>
00339 <span class="comment">                        imm1[kkk+1]=imRGB[lig][j].b;</span>
00340 <span class="comment">                        imm1[kkk+2]=imRGB[lig][j].g;</span>
00341 <span class="comment">                        imm1[kkk+3]=imRGB[lig][j].r;</span>
00342 <span class="comment">                        */</span>
00343                      
00344                         imm1[kkk]  =imRGB[lig][j].<a class="code" href="structRGB.html#o2">b</a>; 
00345                   imm1[kkk+1]=imRGB[lig][j].g;
00346                   imm1[kkk+2]=imRGB[lig][j].r;
00347                   imm1[kkk+3]=0;
00348                   }
00349                   lig++;
00350                }
00351                <span class="keywordflow">if</span>(lig==<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im)) {
00352                
00353                   lig=0;
00354                   kkk=0;
00355    
00356                   XPutImage(disp,win,gc,xim,0,0,0,0,
00357                      <a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(im),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(im));
00358                }
00359             } <span class="comment">/* fin if v=read(fdp... */</span>
00360    
00361             <span class="keywordflow">break</span>;
00362    
00363          } <span class="comment">/* fin Switch   */</span>
00364    
00365          }
00366       }
00367 }
00368 
00369 <span class="preprocessor">#else </span><span class="comment">/* HAVE_X11 */</span>
00370 <span class="preprocessor">#include "<a class="code" href="idima_8h.html">idima.h</a>"</span>
00371 <span class="comment">/* Here we put dummy functions to satisfy filters programs compilation</span>
00372 <span class="comment"> * even when X11 is not available</span>
00373 <span class="comment"> */</span>
<a name="l00374"></a><a class="code" href="idima-restricted_8h.html#a2">00374</a> <span class="keywordtype">void</span> <a class="code" href="idima-restricted_8h.html#a2">_IdImaDisplayColor</a>(PPIMAGE_UCHAR im,
00375                         <span class="keywordtype">int</span> display, 
00376                         <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> nx, <span class="keywordtype">int</span> ny,
00377                         <span class="keywordtype">int</span> ox, <span class="keywordtype">int</span> oy, <a class="code" href="structRGB.html">PSIGNAL_RGB</a> pal)
00378 {}
00379 <span class="preprocessor">#endif </span><span class="comment">/* HAVE_X11 */</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 20 14:28:13 2006 for SIMRI3D by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
