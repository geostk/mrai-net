<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIMRI3D: imachekal.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>imachekal.c</h1><a href="imachekal_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*************************************************************************</span>
00002 <span class="comment">* $Id: imachekal.c,v 1.1 2005/09/09 08:22:45 bellet Exp $</span>
00003 <span class="comment">**************************************************************************</span>
00004 <span class="comment"> This software is governed by the CeCILL  license under French law and</span>
00005 <span class="comment">  abiding by the rules of distribution of free software.  You can  use, </span>
00006 <span class="comment">  modify and/ or redistribute the software under the terms of the CeCILL</span>
00007 <span class="comment">  license as circulated by CEA, CNRS and INRIA at the following URL</span>
00008 <span class="comment">  "http://www.cecill.info". </span>
00009 <span class="comment">  </span>
00010 <span class="comment">  As a counterpart to the access to the source code and  rights to copy,</span>
00011 <span class="comment">  modify and redistribute granted by the license, users are provided only</span>
00012 <span class="comment">  with a limited warranty  and the software's author,  the holder of the</span>
00013 <span class="comment">  economic rights,  and the successive licensors  have only  limited</span>
00014 <span class="comment">  liability. </span>
00015 <span class="comment">  </span>
00016 <span class="comment">  In this respect, the user's attention is drawn to the risks associated</span>
00017 <span class="comment">  with loading,  using,  modifying and/or developing or reproducing the</span>
00018 <span class="comment">  software by the user in light of its specific status of free software,</span>
00019 <span class="comment">  that may mean  that it is complicated to manipulate,  and  that  also</span>
00020 <span class="comment">  therefore means  that it is reserved for developers  and  experienced</span>
00021 <span class="comment">  professionals having in-depth computer knowledge. Users are therefore</span>
00022 <span class="comment">  encouraged to load and test the software's suitability as regards their</span>
00023 <span class="comment">  requirements in conditions enabling the security of their systems and/or </span>
00024 <span class="comment">  data to be ensured and,  more generally, to use and operate it in the </span>
00025 <span class="comment">  same conditions as regards security. </span>
00026 <span class="comment">  </span>
00027 <span class="comment">  The fact that you are presently reading this means that you have had</span>
00028 <span class="comment">  knowledge of the CeCILL license and that you accept its terms.</span>
00029 <span class="comment">  </span>
00030 <span class="comment">  Copyright (c) CREATIS (Centre de Recherche et d'Applications en Traitement de</span>
00031 <span class="comment">  l'Image). All rights reserved. See License.txt for details.</span>
00032 <span class="comment">  </span>
00033 <span class="comment">  Version 1.0  05/09/2005</span>
00034 <span class="comment">*************************************************************************/</span>
00035 
00036 <span class="comment">/*</span>
00037 <span class="comment"> * Compatibility/allocation of images</span>
00038 <span class="comment"> */</span>
00039 <span class="preprocessor">#include "<a class="code" href="idima_8h.html">idima.h</a>"</span>
00040 <span class="preprocessor">#include "<a class="code" href="iderr_8h.html">iderr.h</a>"</span>
00041 
00042 <span class="comment">/*</span>
00043 <span class="comment"> * FUNCTION DESCRIPTION **************************************************</span>
00044 <span class="comment"> * </span>
00045 <span class="comment"> * IdImaCheckTypeSizeAlloc  (fonction)</span>
00046 <span class="comment"> * </span>
00047 <span class="comment"> * RESUME: Test Compatib. 2 im (type/size); Alloc meme taille/type si 2-ieme non allouee</span>
00048 <span class="comment"> * </span>
00049 <span class="comment"> * DESCRIPTION: Test Compatib. 2 im (type/size); Alloc meme taille/type si 2-ieme non allouee.</span>
00050 <span class="comment"> * On peut imposer un Type donne (2-ieme parametre). </span>
00051 <span class="comment"> * S'il vaut -1, tous types autorises</span>
00052 <span class="comment"> * </span>
00053 <span class="comment"> * SYNTAXE:     PPIMAGE imDest = IdImaCheckTypeSizeAlloc (PPIMAGE imSource, int typeImpose, PPIMAGE imDest);</span>
00054 <span class="comment"> * </span>
00055 <span class="comment"> * RETOUR:      type  : PPIMAGE</span>
00056 <span class="comment"> * role  : Pointeur vers l'image resultat. Zero si echec.</span>
00057 <span class="comment"> * </span>
00058 <span class="comment"> * PARAMETRES:  nom   : imSource</span>
00059 <span class="comment"> * type  : PPIMAGE</span>
00060 <span class="comment"> * role  : Pointeur vers l'image source.</span>
00061 <span class="comment"> * </span>
00062 <span class="comment"> * nom   : typeImpose</span>
00063 <span class="comment"> * type  : int</span>
00064 <span class="comment"> * role  : type Obligatoire pour l'image Source</span>
00065 <span class="comment"> * s'il vaut -1, tous les types sont autorises</span>
00066 <span class="comment"> * </span>
00067 <span class="comment"> * nom   : imDest</span>
00068 <span class="comment"> * type  : PPIMAGE</span>
00069 <span class="comment"> * role  : Pointeur vers l'image resultat</span>
00070 <span class="comment"> * Si ce pointeur est nul, l'image est allouee par</span>
00071 <span class="comment"> * la fonction.</span>
00072 <span class="comment"> * Cette image peut eventuellement etre l'image source.</span>
00073 <span class="comment"> * </span>
00074 <span class="comment"> * FICHIER:     ImChekAll.c</span>
00075 <span class="comment"> * </span>
00076 <span class="comment"> * EXEMPLE:     if ( (imd=IdImaCheckTypeSizeAlloc(ims,-1,imd))==0 )</span>
00077 <span class="comment"> * IdErrPrintf("ERREUR: %s",IdErrMsg(IdErrno));</span>
00078 <span class="comment"> * </span>
00079 <span class="comment"> * ******************************************************** END DESCRIPTION </span>
00080 <span class="comment"> */</span>
00081 
00082 <a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>
<a name="l00083"></a><a class="code" href="imachekal_8c.html#a0">00083</a> <a class="code" href="imachekal_8c.html#a0">IdImaCheckTypeSizeAlloc</a>(PPIMAGE imSource, <span class="keywordtype">int</span> typeImpose, PPIMAGE imDest)
00084 {
00085    <span class="keywordflow">if</span> (!imSource) {
00086       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a5">IDERR_POINTER_IS_NULL</a>;
00087       <span class="keywordflow">return</span> 0;
00088    }
00089 
00090    <span class="keywordflow">if</span> (<a class="code" href="idgen_8h.html#a84">IdLibidoType</a>(imSource) != <a class="code" href="idgen_8h.html#a7">IMA</a>) {
00091       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00092       <span class="keywordflow">return</span> 0;
00093    }
00094 
00095    <span class="keywordflow">if</span> (typeImpose != -1) {
00096       <span class="comment">/*</span>
00097 <span class="comment">       * y a-t-il un type Impose </span>
00098 <span class="comment">       */</span>
00099       <span class="keywordflow">if</span> (<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource) != typeImpose) {
00100          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00101          <span class="keywordflow">return</span> 0;
00102       }
00103    }
00104 
00105    <span class="keywordflow">if</span> (!imDest) {
00106       <span class="comment">/*</span>
00107 <span class="comment">       * Alloc. si necessaire *</span>
00108 <span class="comment">       */</span>
00109       imDest = (<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>) <a class="code" href="imaallo_8c.html#a11">IdImaAllocLikeImage</a>(imSource);
00110       <span class="keywordflow">if</span> (!imDest) {
00111          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a28">IDERR_ALLOC_IMA</a>;
00112          <span class="keywordflow">return</span> 0;
00113       }
00114       <span class="keywordflow">return</span> imDest;
00115    } <span class="keywordflow">else</span> {
00116       <span class="comment">/*</span>
00117 <span class="comment">       * Meme taille et type ? *</span>
00118 <span class="comment">       */</span>
00119 
00120       <span class="keywordflow">if</span> (!<a class="code" href="imabasic_8c.html#a18">IdImaSameSizeAndType</a>(imSource, imDest)) {
00121          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a14">IDERR_WRONG_IMAGES</a>;
00122          <span class="keywordflow">return</span> 0;
00123       } <span class="keywordflow">else</span>
00124          <span class="keywordflow">return</span> imDest;
00125    }
00126 }
00127 
00128 <a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>
<a name="l00129"></a><a class="code" href="imachekal_8c.html#a1">00129</a> <a class="code" href="imachekal_8c.html#a1">IdImaCheckSizeTypeAlloc</a>(PPIMAGE SourceIm, <span class="keywordtype">int</span> type, PPIMAGE DestIm)
00130 {
00131    <span class="keywordflow">return</span> <a class="code" href="imachekal_8c.html#a0">IdImaCheckTypeSizeAlloc</a>(SourceIm, type, DestIm);
00132 }
00133 
00134 
00135 <span class="comment">/*</span>
00136 <span class="comment"> * FUNCTION DESCRIPTION **************************************************</span>
00137 <span class="comment"> * </span>
00138 <span class="comment"> * IdImaCheckSizeAlloc  (fonction)</span>
00139 <span class="comment"> * </span>
00140 <span class="comment"> * RESUME: Test Compatib. 2 im (size); Alloc meme taille/type si 2-ieme non allouee.</span>
00141 <span class="comment"> * </span>
00142 <span class="comment"> * DESCRIPTION: Test Compatib. 2 im (size); Alloc meme taille/type si 2-ieme non allouee.</span>
00143 <span class="comment"> * On peut imposer un Type donne (2-ieme parametre. </span>
00144 <span class="comment"> * S'il vaut -1, tous types autorises)</span>
00145 <span class="comment"> * </span>
00146 <span class="comment"> * SYNTAXE:     PPIMAGE imDest = IdImaCheckSizeAlloc (PPIMAGE imSource, int typeImpose, PPIMAGE imDest, int typeImDest);</span>
00147 <span class="comment"> * </span>
00148 <span class="comment"> * RETOUR:      type  : PPIMAGE</span>
00149 <span class="comment"> * role  : Pointeur vers l'image resultat. Zero si echec.</span>
00150 <span class="comment"> * </span>
00151 <span class="comment"> * PARAMETRES:  nom   : imSource</span>
00152 <span class="comment"> * type  : PPIMAGE</span>
00153 <span class="comment"> * role  : Pointeur vers l'image source.</span>
00154 <span class="comment"> * </span>
00155 <span class="comment"> * nom   : typeImpose</span>
00156 <span class="comment"> * type  : int</span>
00157 <span class="comment"> * role  : type Obligatoire pour l'image Source</span>
00158 <span class="comment"> * s'il vaut -1, tous les types sont autorises</span>
00159 <span class="comment"> * </span>
00160 <span class="comment"> * nom   : imDest</span>
00161 <span class="comment"> * type  : PPIMAGE</span>
00162 <span class="comment"> * role  : Pointeur vers l'image resultat</span>
00163 <span class="comment"> * Si ce pointeur est nul, l'image est allouee par</span>
00164 <span class="comment"> * la fonction.</span>
00165 <span class="comment"> * Cette image peut eventuellement etre l'image source.</span>
00166 <span class="comment"> * </span>
00167 <span class="comment"> * nom   : typeImDest</span>
00168 <span class="comment"> * type  : int</span>
00169 <span class="comment"> * role  : Type de l'image resultat</span>
00170 <span class="comment"> * </span>
00171 <span class="comment"> * </span>
00172 <span class="comment"> * FICHIER:     ImChekAll.c</span>
00173 <span class="comment"> * </span>
00174 <span class="comment"> * EXEMPLE:     if ( (imd=IdImaCheckSizeAlloc(ims,-1,imd,IMA_COMPLEX_DOUBLE))==0 )</span>
00175 <span class="comment"> * IdErrPrintf("ERREUR: %s",IdErrMsg(IdErrno));</span>
00176 <span class="comment"> * </span>
00177 <span class="comment"> * ******************************************************** END DESCRIPTION </span>
00178 <span class="comment"> */</span>
00179 
00180 <a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>
<a name="l00181"></a><a class="code" href="imachekal_8c.html#a2">00181</a> <a class="code" href="imachekal_8c.html#a2">IdImaCheckSizeAlloc</a>(PPIMAGE imSource, <span class="keywordtype">int</span> typeImpose, PPIMAGE imDest)
00182 {
00183    <span class="keywordflow">if</span> (!imSource) {
00184       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a5">IDERR_POINTER_IS_NULL</a>;
00185       <span class="keywordflow">return</span> 0;
00186    }
00187 
00188    <span class="keywordflow">if</span> (<a class="code" href="idgen_8h.html#a84">IdLibidoType</a>(imSource) != <a class="code" href="idgen_8h.html#a7">IMA</a>) {
00189       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00190       <span class="keywordflow">return</span> 0;
00191    }
00192    <span class="keywordflow">if</span> (typeImpose != -1) {
00193       <span class="comment">/*</span>
00194 <span class="comment">       * y a-t-il un type Impose </span>
00195 <span class="comment">       */</span>
00196       <span class="keywordflow">if</span> (<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource) != typeImpose) {
00197          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00198          <span class="keywordflow">return</span> 0;
00199       }
00200    }
00201 
00202    <span class="keywordflow">if</span> (!imDest) {
00203       <span class="comment">/*</span>
00204 <span class="comment">       * Alloc. si necessaire *</span>
00205 <span class="comment">       */</span>
00206       imDest = (<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(imSource),
00207                      <a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(imSource),
00208                      <a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource));
00209       <span class="keywordflow">if</span> (!imDest) {
00210          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a28">IDERR_ALLOC_IMA</a>;
00211          <span class="keywordflow">return</span> 0;
00212       }
00213       <span class="keywordflow">return</span> imDest;
00214    } <span class="keywordflow">else</span> {
00215       <span class="comment">/*</span>
00216 <span class="comment">       * Meme taille ? *</span>
00217 <span class="comment">       */</span>
00218       <span class="keywordflow">if</span> (!<a class="code" href="imabasic_8c.html#a16">IdImaSameSize</a>(imSource, imDest)) {
00219          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a14">IDERR_WRONG_IMAGES</a>;
00220          <span class="keywordflow">return</span> 0;
00221       } <span class="keywordflow">else</span>
00222          <span class="keywordflow">return</span> imDest;
00223    }
00224 }
00225 
00226 <span class="comment">/*</span>
00227 <span class="comment"> * FUNCTION DESCRIPTION **************************************************</span>
00228 <span class="comment"> * </span>
00229 <span class="comment"> * IdImaCheckTypeAlloc  (fonction)</span>
00230 <span class="comment"> * </span>
00231 <span class="comment"> * RESUME: Test Compatib. 2 im (type); Alloc meme taille/type si 2-ieme non alloueee</span>
00232 <span class="comment"> * </span>
00233 <span class="comment"> * DESCRIPTION: Test Compatib. 2 im (type); Alloc meme taille/type si 2-ieme non alloueee</span>
00234 <span class="comment"> * On peut imposer un Type donne (2-ieme parametre. </span>
00235 <span class="comment"> * S'il vaut -1, tous types autorises)</span>
00236 <span class="comment"> * </span>
00237 <span class="comment"> * SYNTAXE:     PPIMAGE imDest = IdImaCheckTypeAlloc (PPIMAGE imSource, int typeImpose, PPIMAGE imDest);</span>
00238 <span class="comment"> * </span>
00239 <span class="comment"> * RETOUR:      type  : PPIMAGE</span>
00240 <span class="comment"> * role  : Pointeur vers l'image resultat. Zero si echec.</span>
00241 <span class="comment"> * </span>
00242 <span class="comment"> * PARAMETRES:  nom   : imSource</span>
00243 <span class="comment"> * type  : PPIMAGE</span>
00244 <span class="comment"> * role  : Pointeur vers l'image source.</span>
00245 <span class="comment"> * </span>
00246 <span class="comment"> * nom   : typeImpose</span>
00247 <span class="comment"> * type  : int</span>
00248 <span class="comment"> * role  : type Obligatoire pour l'image Source</span>
00249 <span class="comment"> * s'il vaut -1, tous les types sont autorises</span>
00250 <span class="comment"> * </span>
00251 <span class="comment"> * nom   : imDest</span>
00252 <span class="comment"> * type  : PPIMAGE</span>
00253 <span class="comment"> * role  : Pointeur vers l'image resultat</span>
00254 <span class="comment"> * Si ce pointeur est nul, l'image est allouee par</span>
00255 <span class="comment"> * la fonction.</span>
00256 <span class="comment"> * Cette image peut eventuellement etre l'image source.</span>
00257 <span class="comment"> * </span>
00258 <span class="comment"> * </span>
00259 <span class="comment"> * FICHIER:     ImChekAll.c</span>
00260 <span class="comment"> * </span>
00261 <span class="comment"> * EXEMPLE:     if ( (imd=IdImaCheckTypeAlloc(ims,-1,imd))==0 )</span>
00262 <span class="comment"> * IdErrPrintf("ERREUR: %s",IdErrMsg(IdErrno));</span>
00263 <span class="comment"> * </span>
00264 <span class="comment"> * ******************************************************** END DESCRIPTION </span>
00265 <span class="comment"> */</span>
00266 
00267 <a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>
<a name="l00268"></a><a class="code" href="imachekal_8c.html#a3">00268</a> <a class="code" href="imachekal_8c.html#a3">IdImaCheckTypeAlloc</a>(PPIMAGE imSource, <span class="keywordtype">int</span> typeImpose, PPIMAGE imDest)
00269 {
00270    <span class="keywordflow">if</span> (!imSource) {
00271       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a5">IDERR_POINTER_IS_NULL</a>;
00272       <span class="keywordflow">return</span> 0;
00273    }
00274 
00275    <span class="keywordflow">if</span> (<a class="code" href="idgen_8h.html#a84">IdLibidoType</a>(imSource) != <a class="code" href="idgen_8h.html#a7">IMA</a>) {
00276       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00277       <span class="keywordflow">return</span> 0;
00278    }
00279 
00280    <span class="keywordflow">if</span> (typeImpose != -1) {
00281       <span class="comment">/*</span>
00282 <span class="comment">       * y a-t-il un type Impose </span>
00283 <span class="comment">       */</span>
00284       <span class="keywordflow">if</span> (<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource) != typeImpose) {
00285          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00286          <span class="keywordflow">return</span> 0;
00287       }
00288    }
00289 
00290    <span class="keywordflow">if</span> (!imDest) {
00291       <span class="comment">/*</span>
00292 <span class="comment">       * Alloc. si necessaire *</span>
00293 <span class="comment">       */</span>
00294       imDest = (<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(imSource),
00295                      <a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(imSource),
00296                      <a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource));
00297       <span class="keywordflow">if</span> (!imDest) {
00298          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a28">IDERR_ALLOC_IMA</a>;
00299          <span class="keywordflow">return</span> 0;
00300       }
00301       <span class="keywordflow">return</span> imDest;
00302    } <span class="keywordflow">else</span> {
00303       <span class="comment">/*</span>
00304 <span class="comment">       * Meme type ? *</span>
00305 <span class="comment">       */</span>
00306       <span class="keywordflow">if</span> (!<a class="code" href="imabasic_8c.html#a17">IdImaSameType</a>(imSource, imDest)) {
00307          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a14">IDERR_WRONG_IMAGES</a>;
00308          <span class="keywordflow">return</span> 0;
00309       } <span class="keywordflow">else</span>
00310          <span class="keywordflow">return</span> imDest;
00311    }
00312 }
00313 
00314 <span class="comment">/*</span>
00315 <span class="comment"> * FUNCTION DESCRIPTION **************************************************</span>
00316 <span class="comment"> * </span>
00317 <span class="comment"> * IdImaCheckSizeAllocType  (fonction)</span>
00318 <span class="comment"> * </span>
00319 <span class="comment"> * RESUME: Test Compatib. 2 im (size); Alloc type choisi/meme taille si 2-ieme non allouee.</span>
00320 <span class="comment"> * </span>
00321 <span class="comment"> * DESCRIPTION: Test Compatib. 2 im (size); Alloc type choisi/meme taille si 2-ieme non allouee.</span>
00322 <span class="comment"> * On PEUT imposer un Type donne pour l'image origine (2-ieme parametre. </span>
00323 <span class="comment"> * S'il vaut -1, tous types autorises)</span>
00324 <span class="comment"> * On DOIT preciser le type de l'image destination.</span>
00325 <span class="comment"> * </span>
00326 <span class="comment"> * SYNTAXE:     PPIMAGE imDest = IdImaCheckSizeAlloc (PPIMAGE imSource, int typeImpose, PPIMAGE imDest, int typeImDest);</span>
00327 <span class="comment"> * </span>
00328 <span class="comment"> * RETOUR:      type  : PPIMAGE</span>
00329 <span class="comment"> * role  : Pointeur vers l'image resultat. Zero si echec.</span>
00330 <span class="comment"> * </span>
00331 <span class="comment"> * PARAMETRES:  nom   : imSource</span>
00332 <span class="comment"> * type  : PPIMAGE</span>
00333 <span class="comment"> * role  : Pointeur vers l'image source.</span>
00334 <span class="comment"> * </span>
00335 <span class="comment"> * nom   : typeImpose</span>
00336 <span class="comment"> * type  : int</span>
00337 <span class="comment"> * role  : type Obligatoire pour l'image Source</span>
00338 <span class="comment"> * s'il vaut -1, tous les types sont autorises</span>
00339 <span class="comment"> * </span>
00340 <span class="comment"> * nom   : imDest</span>
00341 <span class="comment"> * type  : PPIMAGE</span>
00342 <span class="comment"> * role  : Pointeur vers l'image resultat</span>
00343 <span class="comment"> * Si ce pointeur est nul, l'image est allouee par</span>
00344 <span class="comment"> * la fonction.</span>
00345 <span class="comment"> * Cette image peut eventuellement etre l'image source.</span>
00346 <span class="comment"> * </span>
00347 <span class="comment"> * nom   : typeImDest</span>
00348 <span class="comment"> * type  : int</span>
00349 <span class="comment"> * role  : Type de l'image resultat</span>
00350 <span class="comment"> * </span>
00351 <span class="comment"> * FICHIER:     ImChekAll.c</span>
00352 <span class="comment"> * </span>
00353 <span class="comment"> * EXEMPLE:     if ( (imd=IdImaCheckSizeAlloc(ims,-1,imd,IMA_COMPLEX_DOUBLE))==0 )</span>
00354 <span class="comment"> * IdErrPrintf("ERREUR: %s",IdErrMsg(IdErrno));</span>
00355 <span class="comment"> * </span>
00356 <span class="comment"> * ******************************************************** END DESCRIPTION </span>
00357 <span class="comment"> */</span>
00358 
00359 <a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>
<a name="l00360"></a><a class="code" href="imachekal_8c.html#a4">00360</a> <a class="code" href="imachekal_8c.html#a4">IdImaCheckSizeAllocType</a>(PPIMAGE imSource, <span class="keywordtype">int</span> typeImpose,
00361          PPIMAGE imDest, <span class="keywordtype">int</span> typeImDest)
00362 {
00363    <span class="keywordflow">if</span> (!imSource) {
00364       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a5">IDERR_POINTER_IS_NULL</a>;
00365       <span class="keywordflow">return</span> 0;
00366    }
00367 
00368    <span class="keywordflow">if</span> (<a class="code" href="idgen_8h.html#a84">IdLibidoType</a>(imSource) != <a class="code" href="idgen_8h.html#a7">IMA</a>) {
00369       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00370       <span class="keywordflow">return</span> 0;
00371    }
00372 
00373    <span class="keywordflow">if</span> (typeImpose != -1) {
00374       <span class="comment">/*</span>
00375 <span class="comment">       * y a-t-il un type Impose </span>
00376 <span class="comment">       */</span>
00377       <span class="keywordflow">if</span> (<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource) != typeImpose) {
00378          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00379          <span class="keywordflow">return</span> 0;
00380       }
00381    }
00382 
00383    <span class="keywordflow">if</span> (!imDest) {
00384       <span class="comment">/*</span>
00385 <span class="comment">       * Alloc. si necessaire</span>
00386 <span class="comment">       */</span>
00387       imDest = (<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(imSource),
00388                      <a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(imSource),
00389                      typeImDest);
00390       <span class="keywordflow">if</span> (!imDest) {
00391          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a28">IDERR_ALLOC_IMA</a>;
00392          <span class="keywordflow">return</span> 0;
00393       }
00394       <span class="keywordflow">return</span> imDest;
00395    } <span class="keywordflow">else</span> {
00396       <span class="comment">/*</span>
00397 <span class="comment">       * Meme taille ? *</span>
00398 <span class="comment">       */</span>
00399       <span class="keywordflow">if</span> (!<a class="code" href="imabasic_8c.html#a16">IdImaSameSize</a>(imSource, imDest)) {
00400          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a14">IDERR_WRONG_IMAGES</a>;
00401          <span class="keywordflow">return</span> 0;
00402       } <span class="keywordflow">else</span>
00403        <span class="keywordflow">if</span> (<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imDest) != typeImDest) {
00404          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00405          <span class="keywordflow">return</span> 0;
00406       }
00407 
00408       <span class="keywordflow">return</span> imDest;
00409    }
00410 }
00411 
00412 <span class="comment">/*</span>
00413 <span class="comment"> * FUNCTION DESCRIPTION **************************************************</span>
00414 <span class="comment"> * </span>
00415 <span class="comment"> * IdImaCheckTypeAllocSize  (fonction)</span>
00416 <span class="comment"> * </span>
00417 <span class="comment"> * RESUME: Test Compatib. 2 im (type); Alloc meme type,taille choisie si 2-ieme non allouee</span>
00418 <span class="comment"> * </span>
00419 <span class="comment"> * DESCRIPTION: Test Compatib. 2 im (type);  Alloc meme type,taille choisie si 2-ieme non allouee.</span>
00420 <span class="comment"> * On peut imposer un Type donne pour l'image Source (2-ieme parametre. </span>
00421 <span class="comment"> * S'il vaut -1, tous types autorises)</span>
00422 <span class="comment"> * </span>
00423 <span class="comment"> * SYNTAXE:     PPIMAGE imDest = IdImaCheckTypeAllocSize (PPIMAGE imSource, int typeImpose, PPIMAGE imDest, int nouvTailleX, int nouvTailleY);</span>
00424 <span class="comment"> * </span>
00425 <span class="comment"> * RETOUR:      type  : PPIMAGE</span>
00426 <span class="comment"> * role  : Pointeur vers l'image resultat. Zero si echec.</span>
00427 <span class="comment"> * </span>
00428 <span class="comment"> * PARAMETRES:  nom   : imSource</span>
00429 <span class="comment"> * type  : PPIMAGE</span>
00430 <span class="comment"> * role  : Pointeur vers l'image source.</span>
00431 <span class="comment"> * </span>
00432 <span class="comment"> * nom   : typeImpose</span>
00433 <span class="comment"> * type  : int</span>
00434 <span class="comment"> * role  : type Obligatoire pour l'image Source</span>
00435 <span class="comment"> * s'il vaut -1, tous les types sont autorises</span>
00436 <span class="comment"> * </span>
00437 <span class="comment"> * nom   : imDest</span>
00438 <span class="comment"> * type  : PPIMAGE</span>
00439 <span class="comment"> * role  : Pointeur vers l'image resultat</span>
00440 <span class="comment"> * Si ce pointeur est nul, l'image est allouee par</span>
00441 <span class="comment"> * la fonction.</span>
00442 <span class="comment"> * Cette image peut eventuellement etre l'image source.</span>
00443 <span class="comment"> * </span>
00444 <span class="comment"> * nom   : nouvTailleX</span>
00445 <span class="comment"> * type  : int</span>
00446 <span class="comment"> * role  : Taille en X de l'image resultat, </span>
00447 <span class="comment"> * si elle n'est pas deja allouee</span>
00448 <span class="comment"> * </span>
00449 <span class="comment"> * nom   : nouvTailleY</span>
00450 <span class="comment"> * type  : int</span>
00451 <span class="comment"> * role  : Taille en Y de l'image resultat, </span>
00452 <span class="comment"> * si elle n'est pas deja allouee</span>
00453 <span class="comment"> * </span>
00454 <span class="comment"> * FICHIER:     ImChekAll.c</span>
00455 <span class="comment"> * </span>
00456 <span class="comment"> * EXEMPLE:     if ( (imd=IdImaCheckTypeAllocSize(ims,-1,imd,128,256))==0 )</span>
00457 <span class="comment"> * IdErrPrintf("ERREUR: %s",IdErrMsg(IdErrno));</span>
00458 <span class="comment"> * </span>
00459 <span class="comment"> * ******************************************************** END DESCRIPTION </span>
00460 <span class="comment"> */</span>
00461 
00462 <a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>
<a name="l00463"></a><a class="code" href="imachekal_8c.html#a5">00463</a> <a class="code" href="imachekal_8c.html#a5">IdImaCheckTypeAllocSize</a>(PPIMAGE imSource, <span class="keywordtype">int</span> typeImpose,
00464          PPIMAGE imDest, <span class="keywordtype">int</span> nouvTailleX, <span class="keywordtype">int</span> nouvTailleY)
00465 {
00466    <span class="keywordflow">if</span> (!imSource) {
00467       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a5">IDERR_POINTER_IS_NULL</a>;
00468       <span class="keywordflow">return</span> 0;
00469    }
00470 
00471    <span class="keywordflow">if</span> (<a class="code" href="idgen_8h.html#a84">IdLibidoType</a>(imSource) != <a class="code" href="idgen_8h.html#a7">IMA</a>) {
00472       <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00473       <span class="keywordflow">return</span> 0;
00474    }
00475 
00476    <span class="keywordflow">if</span> (typeImpose != -1) {
00477       <span class="keywordflow">if</span> (<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource) != typeImpose) {
00478          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00479          <span class="keywordflow">return</span> 0;
00480       }
00481    }
00482 
00483    <span class="keywordflow">if</span> (!imDest) {
00484       <span class="comment">/*</span>
00485 <span class="comment">       * Alloc. si necessaire *</span>
00486 <span class="comment">       */</span>
00487       imDest = (<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(nouvTailleX, nouvTailleY,
00488                      <a class="code" href="imabasic_8c.html#a7">IdImaType</a>(imSource));
00489       <span class="keywordflow">if</span> (!imDest) {
00490          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a28">IDERR_ALLOC_IMA</a>;
00491          <span class="keywordflow">return</span> 0;
00492       }
00493       <span class="keywordflow">return</span> imDest;
00494    } <span class="keywordflow">else</span> {
00495       <span class="comment">/*</span>
00496 <span class="comment">       * Meme type ? *</span>
00497 <span class="comment">       */</span>
00498 
00499       <span class="keywordflow">if</span> (!<a class="code" href="imabasic_8c.html#a17">IdImaSameType</a>(imSource, imDest)) {
00500          <a class="code" href="iderr_8h.html#a65">IdErrno</a> = <a class="code" href="iderr_8h.html#a14">IDERR_WRONG_IMAGES</a>;
00501 
00502          <span class="keywordflow">return</span> 0;
00503       } <span class="keywordflow">else</span>
00504          <span class="keywordflow">return</span> imDest;
00505    }
00506 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 20 14:28:14 2006 for SIMRI3D by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
