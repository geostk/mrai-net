<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIMRI3D: imamax.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>imamax.c</h1><a href="imamax_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*************************************************************************</span>
00002 <span class="comment">* $Id: imamax.c,v 1.1 2005/09/09 08:22:49 bellet Exp $</span>
00003 <span class="comment">**************************************************************************</span>
00004 <span class="comment"> This software is governed by the CeCILL  license under French law and</span>
00005 <span class="comment">  abiding by the rules of distribution of free software.  You can  use, </span>
00006 <span class="comment">  modify and/ or redistribute the software under the terms of the CeCILL</span>
00007 <span class="comment">  license as circulated by CEA, CNRS and INRIA at the following URL</span>
00008 <span class="comment">  "http://www.cecill.info". </span>
00009 <span class="comment">  </span>
00010 <span class="comment">  As a counterpart to the access to the source code and  rights to copy,</span>
00011 <span class="comment">  modify and redistribute granted by the license, users are provided only</span>
00012 <span class="comment">  with a limited warranty  and the software's author,  the holder of the</span>
00013 <span class="comment">  economic rights,  and the successive licensors  have only  limited</span>
00014 <span class="comment">  liability. </span>
00015 <span class="comment">  </span>
00016 <span class="comment">  In this respect, the user's attention is drawn to the risks associated</span>
00017 <span class="comment">  with loading,  using,  modifying and/or developing or reproducing the</span>
00018 <span class="comment">  software by the user in light of its specific status of free software,</span>
00019 <span class="comment">  that may mean  that it is complicated to manipulate,  and  that  also</span>
00020 <span class="comment">  therefore means  that it is reserved for developers  and  experienced</span>
00021 <span class="comment">  professionals having in-depth computer knowledge. Users are therefore</span>
00022 <span class="comment">  encouraged to load and test the software's suitability as regards their</span>
00023 <span class="comment">  requirements in conditions enabling the security of their systems and/or </span>
00024 <span class="comment">  data to be ensured and,  more generally, to use and operate it in the </span>
00025 <span class="comment">  same conditions as regards security. </span>
00026 <span class="comment">  </span>
00027 <span class="comment">  The fact that you are presently reading this means that you have had</span>
00028 <span class="comment">  knowledge of the CeCILL license and that you accept its terms.</span>
00029 <span class="comment">  </span>
00030 <span class="comment">  Copyright (c) CREATIS (Centre de Recherche et d'Applications en Traitement de</span>
00031 <span class="comment">  l'Image). All rights reserved. See License.txt for details.</span>
00032 <span class="comment">  </span>
00033 <span class="comment">  Version 1.0  05/09/2005</span>
00034 <span class="comment">*************************************************************************/</span>
00035 
00036 <span class="comment">/*************************************************************************</span>
00037 <span class="comment">*</span>
00038 <span class="comment">*  Description : Calcule le maxima d'une image non COMPLEX</span>
00039 <span class="comment">*</span>
00040 <span class="comment">**************************************************************************/</span>
00041 <span class="preprocessor">#include &lt;math.h&gt;</span>
00042 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00043 <span class="preprocessor">#include "<a class="code" href="idima_8h.html">idima.h</a>"</span>
00044 <span class="preprocessor">#include "<a class="code" href="iderr_8h.html">iderr.h</a>"</span>
00045 <span class="preprocessor">#include "<a class="code" href="idprint_8h.html">idprint.h</a>"</span>
00046 
00047 <span class="comment">/* FUNCTION DESCRIPTION **************************************************</span>
00048 <span class="comment">* </span>
00049 <span class="comment">* IdImaMinima   (fonction)</span>
00050 <span class="comment">* </span>
00051 <span class="comment">* RESUME: Calcule le Minimum d'une image non COMPLEX </span>
00052 <span class="comment">* </span>
00053 <span class="comment">* DESCRIPTION: Calcule le Minimum d'une image non COMPLEX </span>
00054 <span class="comment">* </span>
00055 <span class="comment">* SYNTAXE:     double min = IdImaMinima(PPIMAGE image);</span>
00056 <span class="comment">* </span>
00057 <span class="comment">* RETOUR:      type  : Double</span>
00058 <span class="comment">*              role  : valeur min de l'image.</span>
00059 <span class="comment">* </span>
00060 <span class="comment">* PARAMETRES:  nom   : ima</span>
00061 <span class="comment">*              type  : PPIMAGE</span>
00062 <span class="comment">*              role  : Pointeur vers l'image source</span>
00063 <span class="comment">* </span>
00064 <span class="comment">* FICHIER:     IMAMAX.c</span>
00065 <span class="comment">* </span>
00066 <span class="comment">* EXEMPLE:</span>
00067 <span class="comment">* </span>
00068 <span class="comment">******************************************************** END DESCRIPTION */</span>
00069 
<a name="l00070"></a><a class="code" href="imamax_8c.html#a0">00070</a> <span class="preprocessor">#define CCMIN(t1)              \</span>
00071 <span class="preprocessor">          mini = (double) ((t1)ima)[0][0];          \</span>
00072 <span class="preprocessor">          for (i=0;i&lt;Y;i++) for (j=0;j&lt;X;j++)       \</span>
00073 <span class="preprocessor">          {                                         \</span>
00074 <span class="preprocessor">           if (((t1)ima)[i][j]&lt;mini)                 \</span>
00075 <span class="preprocessor">                mini = (double) ((t1)ima)[i][j];     \</span>
00076 <span class="preprocessor">          }</span>
00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="imamax_8c.html#a6">00078</a> <span class="keywordtype">double</span> <a class="code" href="imamax_8c.html#a6">IdImaMinima</a> (PPIMAGE ima)
00079 {
00080   <span class="keywordtype">double</span> mini=0.0; <span class="comment">/* FB 24-01-2000 */</span>
00081   <span class="keywordtype">int</span> i,j,X,Y;
00082 
00083   X=<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(ima);
00084   Y=<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(ima);
00085  <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima))
00086     {
00087      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>:   <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>);  <span class="keywordflow">break</span>;
00088      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a0">IMA_CHAR</a>:    <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a24">PPIMAGE_CHAR</a>);   <span class="keywordflow">break</span>;
00089      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a3">IMA_USHORT</a>:  <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a>); <span class="keywordflow">break</span>;
00090      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a2">IMA_SHORT</a>:   <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a31">PPIMAGE_SHORT</a>);  <span class="keywordflow">break</span>;
00091      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a4">IMA_LONG</a>:    <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a33">PPIMAGE_LONG</a>);   <span class="keywordflow">break</span>;
00092      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a5">IMA_ULONG</a>:   <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a34">PPIMAGE_ULONG</a>);   <span class="keywordflow">break</span>;
00093      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a6">IMA_FLOAT</a>:   <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a>);  <span class="keywordflow">break</span>;
00094      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a7">IMA_DOUBLE</a>:  <a class="code" href="imamax_8c.html#a0">CCMIN</a>(<a class="code" href="idima-ido_8h.html#a27">PPIMAGE_DOUBLE</a>);  <span class="keywordflow">break</span>;
00095      <span class="keywordflow">default</span>:
00096       {
00097        <a class="code" href="kerprint_8c.html#a4">IdPrintf</a>(<span class="stringliteral">"Type %d non traitable par la fonction IdImaMinima !\n"</span>,<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima));
00098        <a class="code" href="iderr_8h.html#a66">IdExit</a>(0);
00099       }
00100     } <span class="comment">/* Fin du switch */</span>
00101 
00102  <span class="keywordflow">return</span>(mini);
00103 }
00104 
00105 
00106 <span class="comment">/* FUNCTION DESCRIPTION **************************************************</span>
00107 <span class="comment">* </span>
00108 <span class="comment">* IdImaMaxima   (fonction)</span>
00109 <span class="comment">* </span>
00110 <span class="comment">* RESUME: Calcule le Maximum d'une image non COMPLEX</span>
00111 <span class="comment">* </span>
00112 <span class="comment">* DESCRIPTION: Calcule le Maximum d'une image non COMPLEX</span>
00113 <span class="comment">* </span>
00114 <span class="comment">* SYNTAXE:    double max = IdImaMaxima (PPIMAGE image);</span>
00115 <span class="comment">* </span>
00116 <span class="comment">* RETOUR:      type  : double</span>
00117 <span class="comment">*              role  : valeur max de l'image.</span>
00118 <span class="comment">* </span>
00119 <span class="comment">* PARAMETRES:  nom   : ima</span>
00120 <span class="comment">*              type  : PPIMAGE</span>
00121 <span class="comment">*              role  : Pointeur vers l'image source</span>
00122 <span class="comment">* </span>
00123 <span class="comment">* FICHIER:     IMAMAX.c</span>
00124 <span class="comment">* </span>
00125 <span class="comment">* EXEMPLE:</span>
00126 <span class="comment">* </span>
00127 <span class="comment">******************************************************** END DESCRIPTION */</span>
00128 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00129 <span class="preprocessor">#include "<a class="code" href="idima_8h.html">idima.h</a>"</span>
00130 
<a name="l00131"></a><a class="code" href="imamax_8c.html#a1">00131</a> <span class="preprocessor">#define CC(t1) maxi = (double) ((t1)ima)[0][0];            \</span>
00132 <span class="preprocessor">   for (i=0;i&lt;Y;i++) for (j=0;j&lt;X;j++)                \</span>
00133 <span class="preprocessor">          {                                                \</span>
00134 <span class="preprocessor">           if (((t1)ima)[i][j]&gt;maxi)                        \</span>
00135 <span class="preprocessor">                maxi = (double) ((t1)ima)[i][j];            \</span>
00136 <span class="preprocessor">          }</span>
00137 <span class="preprocessor"></span>
00138 
00139 
<a name="l00140"></a><a class="code" href="imamax_8c.html#a7">00140</a> <span class="keywordtype">double</span> <a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>(PPIMAGE ima)
00141 {
00142   <span class="keywordtype">double</span> maxi;
00143   <span class="keywordtype">int</span> i,j,X,Y;
00144 
00145   X=<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(ima);
00146   Y=<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(ima);
00147   <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima))
00148     {
00149      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>:    <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>);    <span class="keywordflow">break</span>;
00150      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a0">IMA_CHAR</a>:     <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a24">PPIMAGE_CHAR</a>);     <span class="keywordflow">break</span>;
00151      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a3">IMA_USHORT</a>:   <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a>);   <span class="keywordflow">break</span>;
00152      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a2">IMA_SHORT</a>:    <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a31">PPIMAGE_SHORT</a>);    <span class="keywordflow">break</span>;
00153      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a4">IMA_LONG</a>:     <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a33">PPIMAGE_LONG</a>);     <span class="keywordflow">break</span>;
00154      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a5">IMA_ULONG</a>:    <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a34">PPIMAGE_ULONG</a>);    <span class="keywordflow">break</span>;
00155      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a6">IMA_FLOAT</a>:    <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a>);    <span class="keywordflow">break</span>;
00156      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a7">IMA_DOUBLE</a>:   <a class="code" href="imamax_8c.html#a1">CC</a>(<a class="code" href="idima-ido_8h.html#a27">PPIMAGE_DOUBLE</a>);   <span class="keywordflow">break</span>;
00157      <span class="keywordflow">default</span>:
00158        <a class="code" href="kerprint_8c.html#a4">IdPrintf</a>(<span class="stringliteral">"Type %d non traitable par la fonction IdImaMaxima !\n"</span>,<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima));
00159    <a class="code" href="iderr_8h.html#a65">IdErrno</a>=<a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00160        <span class="keywordflow">return</span>(0);
00161     } <span class="comment">/* Fin du switch */</span>
00162 
00163  <span class="keywordflow">return</span>(maxi);
00164 }
00165 
00166 
00167 <span class="comment">/* FUNCTION DESCRIPTION **************************************************</span>
00168 <span class="comment">* </span>
00169 <span class="comment">* IdImaMinMax   (fonction)</span>
00170 <span class="comment">* </span>
00171 <span class="comment">* RESUME: Calcule le Min et le Maximum d'une image non COMPLEX</span>
00172 <span class="comment">* </span>
00173 <span class="comment">* DESCRIPTION: Calcule le Min et le Maximum  d'une image non COMPLEX</span>
00174 <span class="comment">* </span>
00175 <span class="comment">* SYNTAXE:     void IdImaMinMax (PPIMAGE image, double *min, double *max);</span>
00176 <span class="comment">* </span>
00177 <span class="comment">* RETOUR:      type  : Double</span>
00178 <span class="comment">*              role  : valeur max de l'image.</span>
00179 <span class="comment">* </span>
00180 <span class="comment">* PARAMETRES:  nom   : ima</span>
00181 <span class="comment">*              type  : PPIMAGE</span>
00182 <span class="comment">*              role  : Pointeur vers l'image source</span>
00183 <span class="comment">* </span>
00184 <span class="comment">* FICHIER:     IMAMAX.c</span>
00185 <span class="comment">* </span>
00186 <span class="comment">* EXEMPLE:</span>
00187 <span class="comment">* </span>
00188 <span class="comment">******************************************************** END DESCRIPTION */</span>
00189 
00190 
<a name="l00200"></a><a class="code" href="imamax_8c.html#a2">00200</a> <span class="preprocessor">#define CCMM(t1)                 \</span>
00201 <span class="preprocessor">          *maxi = *mini = (double) ((t1)ima)[0][0];             \</span>
00202 <span class="preprocessor">     for (i=0;i&lt;Y;i++) for (j=0;j&lt;X;j++)              \</span>
00203 <span class="preprocessor">          {                                                     \</span>
00204 <span class="preprocessor">           if (((t1)ima)[i][j]&gt;*maxi)              \</span>
00205 <span class="preprocessor">                { *maxi = (double) ((t1)ima)[i][j]; }    \</span>
00206 <span class="preprocessor">          else if (((t1)ima)[i][j]&lt;*mini)                \</span>
00207 <span class="preprocessor">                { *mini = (double) ((t1)ima)[i][j]; }    \</span>
00208 <span class="preprocessor">          }</span>
00209 <span class="preprocessor"></span>
<a name="l00210"></a><a class="code" href="imamax_8c.html#a8">00210</a> <span class="keywordtype">int</span> <a class="code" href="imamax_8c.html#a8">IdImaMinMax</a> (
00211    PPIMAGE ima,
00212    <span class="keywordtype">double</span>  *mini,
00213    <span class="keywordtype">double</span>  *maxi)
00214 
00215 {
00216   <span class="keywordtype">int</span> i,j,X,Y;
00217 
00218   X=<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(ima);
00219   Y=<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(ima);
00220 
00221 
00222   <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima))
00223     {
00224      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>:    <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>);    <span class="keywordflow">break</span>;
00225      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a0">IMA_CHAR</a>:     <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a24">PPIMAGE_CHAR</a>);     <span class="keywordflow">break</span>;
00226      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a3">IMA_USHORT</a>:   <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a>);   <span class="keywordflow">break</span>;
00227      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a2">IMA_SHORT</a>:    <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a31">PPIMAGE_SHORT</a>);    <span class="keywordflow">break</span>;
00228      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a4">IMA_LONG</a>:     <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a33">PPIMAGE_LONG</a>);     <span class="keywordflow">break</span>;
00229      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a5">IMA_ULONG</a>:    <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a34">PPIMAGE_ULONG</a>);    <span class="keywordflow">break</span>;
00230      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a6">IMA_FLOAT</a>:    <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a>);    <span class="keywordflow">break</span>;
00231      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a7">IMA_DOUBLE</a>:   <a class="code" href="imamax_8c.html#a2">CCMM</a>(<a class="code" href="idima-ido_8h.html#a27">PPIMAGE_DOUBLE</a>);   <span class="keywordflow">break</span>;
00232      <span class="keywordflow">default</span>:
00233        <a class="code" href="kerprint_8c.html#a4">IdPrintf</a>(<span class="stringliteral">"Type %d non traitable par la fonction IdImaMinMax !\n"</span>,<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima));
00234    <a class="code" href="iderr_8h.html#a65">IdErrno</a>=<a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00235        <span class="keywordflow">return</span>(0);
00236     } <span class="comment">/* Fin du switch */</span>
00237 <span class="keywordflow">return</span>(1);
00238  }
00239 
<a name="l00240"></a><a class="code" href="imamax_8c.html#a3">00240</a> <span class="preprocessor">#define CCMOY(t1) for (i=0;i&lt;Y;i++) for (j=0;j&lt;X;j++)         \</span>
00241 <span class="preprocessor">          {                                                   \</span>
00242 <span class="preprocessor">                moy += (double) ((t1)ima)[i][j];              \</span>
00243 <span class="preprocessor">          }</span>
00244 <span class="preprocessor"></span>
<a name="l00251"></a><a class="code" href="imamax_8c.html#a9">00251</a> <span class="keywordtype">double</span> <a class="code" href="imamax_8c.html#a9">IdImaMoyenne</a> (PPIMAGE ima)
00252 {
00253   <span class="keywordtype">double</span> moy;
00254   <span class="keywordtype">int</span> i,j,X,Y;
00255 
00256   X=<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(ima);
00257   Y=<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(ima);
00258   moy = 0.0;
00259   <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima))
00260     {
00261      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>:    <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>);    <span class="keywordflow">break</span>;
00262      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a0">IMA_CHAR</a>:     <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a24">PPIMAGE_CHAR</a>);     <span class="keywordflow">break</span>;
00263      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a3">IMA_USHORT</a>:   <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a>);   <span class="keywordflow">break</span>;
00264      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a2">IMA_SHORT</a>:    <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a31">PPIMAGE_SHORT</a>);    <span class="keywordflow">break</span>;
00265      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a4">IMA_LONG</a>:     <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a33">PPIMAGE_LONG</a>);     <span class="keywordflow">break</span>;
00266      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a5">IMA_ULONG</a>:    <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a34">PPIMAGE_ULONG</a>);    <span class="keywordflow">break</span>;
00267      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a6">IMA_FLOAT</a>:    <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a>);    <span class="keywordflow">break</span>;
00268      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a7">IMA_DOUBLE</a>:   <a class="code" href="imamax_8c.html#a3">CCMOY</a>(<a class="code" href="idima-ido_8h.html#a27">PPIMAGE_DOUBLE</a>);   <span class="keywordflow">break</span>;
00269      <span class="keywordflow">default</span>:
00270        <a class="code" href="kerprint_8c.html#a4">IdPrintf</a>(<span class="stringliteral">"Type %d non traitable par la fonction IdImaMoyenne !\n"</span>,<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima));
00271    <a class="code" href="iderr_8h.html#a65">IdErrno</a>=<a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00272        <span class="keywordflow">return</span>(0);
00273     } <span class="comment">/* Fin du switch */</span>
00274 
00275      moy = moy /((<span class="keywordtype">double</span>)X*(<span class="keywordtype">double</span>)Y);
00276 
00277      <span class="keywordflow">return</span> moy;
00278  }
00279 
00280 <span class="comment">/* FUNCTION DESCRIPTION **************************************************</span>
00281 <span class="comment">* </span>
00282 <span class="comment">* IdImaVariance   (fonction)</span>
00283 <span class="comment">* </span>
00284 <span class="comment">* RESUME: Calcule la Variance d'une image non COMPLEX</span>
00285 <span class="comment">* </span>
00286 <span class="comment">* DESCRIPTION: Calcule la Variance d'une image non COMPLEX</span>
00287 <span class="comment">* </span>
00288 <span class="comment">* SYNTAXE:     double var = IdImaVariance (PPIMAGE image);</span>
00289 <span class="comment">* </span>
00290 <span class="comment">* RETOUR:      type  : Double</span>
00291 <span class="comment">*              role  : variance de l'image.</span>
00292 <span class="comment">* </span>
00293 <span class="comment">* PARAMETRES:  nom   : ima</span>
00294 <span class="comment">*              type  : PPIMAGE</span>
00295 <span class="comment">*              role  : Pointeur vers l'image source</span>
00296 <span class="comment">* </span>
00297 <span class="comment">* FICHIER:     IMAMAX.c</span>
00298 <span class="comment">* </span>
00299 <span class="comment">* EXEMPLE:</span>
00300 <span class="comment">* </span>
00301 <span class="comment">******************************************************** END DESCRIPTION */</span>
00302 
<a name="l00303"></a><a class="code" href="imamax_8c.html#a4">00303</a> <span class="preprocessor">#define CCVAR(t1) for (i=0;i&lt;Y;i++) for (j=0;j&lt;X;j++)   \</span>
00304 <span class="preprocessor">          {                                             \</span>
00305 <span class="preprocessor">           var += pow((moy -(double) ( ((t1)ima)[i][j])),2.0 );     \</span>
00306 <span class="preprocessor">          }</span>
00307 <span class="preprocessor"></span>
00308 
<a name="l00309"></a><a class="code" href="imamax_8c.html#a10">00309</a> <span class="keywordtype">double</span> <a class="code" href="imamax_8c.html#a10">IdImaVariance</a>( PPIMAGE ima)
00310 {
00311   <span class="keywordtype">double</span> moy,var;
00312   <span class="keywordtype">int</span> i,j,X,Y;
00313 
00314   X = <a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(ima);
00315   Y = <a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(ima);
00316   moy = <a class="code" href="imamax_8c.html#a9">IdImaMoyenne</a>(ima);
00317   var = 0.0;
00318 
00319   <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima))
00320     {
00321      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>:    <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>);    <span class="keywordflow">break</span>;
00322      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a0">IMA_CHAR</a>:     <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a24">PPIMAGE_CHAR</a>);     <span class="keywordflow">break</span>;
00323      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a3">IMA_USHORT</a>:   <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a>);   <span class="keywordflow">break</span>;
00324      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a2">IMA_SHORT</a>:    <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a31">PPIMAGE_SHORT</a>);    <span class="keywordflow">break</span>;
00325      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a4">IMA_LONG</a>:     <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a33">PPIMAGE_LONG</a>);     <span class="keywordflow">break</span>;
00326      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a5">IMA_ULONG</a>:    <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a34">PPIMAGE_ULONG</a>);    <span class="keywordflow">break</span>;
00327      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a6">IMA_FLOAT</a>:    <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a>);    <span class="keywordflow">break</span>;
00328      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a7">IMA_DOUBLE</a>:   <a class="code" href="imamax_8c.html#a4">CCVAR</a>(<a class="code" href="idima-ido_8h.html#a27">PPIMAGE_DOUBLE</a>);   <span class="keywordflow">break</span>;
00329      <span class="keywordflow">default</span>:
00330        <a class="code" href="kerprint_8c.html#a4">IdPrintf</a>(<span class="stringliteral">"Type %d non traitable par la fonction IdImaVariance !\n"</span>,<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima));
00331    <a class="code" href="iderr_8h.html#a65">IdErrno</a>=<a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00332        <span class="keywordflow">return</span>(0);
00333     } <span class="comment">/* Fin du switch */</span>
00334 
00335 var = var /((<span class="keywordtype">double</span>)X*(<span class="keywordtype">double</span>)Y);
00336 
00337  <span class="keywordflow">return</span>(var);
00338 }
00339 
00340 <span class="comment">/* FUNCTION DESCRIPTION **************************************************</span>
00341 <span class="comment">* </span>
00342 <span class="comment">* IdImaMoyVar   (fonction)</span>
00343 <span class="comment">* </span>
00344 <span class="comment">* RESUME: Calcule la Moyenne et la Variance d'une image non COMPLEX</span>
00345 <span class="comment">* </span>
00346 <span class="comment">* DESCRIPTION: Calcule la Moyenne et la Variance d'une image non COMPLEX</span>
00347 <span class="comment">* </span>
00348 <span class="comment">* SYNTAXE:     int retCode = IdImaMoyVar (PPIMAGE image, double *moy, double *var);</span>
00349 <span class="comment">* </span>
00350 <span class="comment">* RETOUR:      type  : int</span>
00351 <span class="comment">*              role  : code retour (1:OK 0:echec)</span>
00352 <span class="comment">* </span>
00353 <span class="comment">* PARAMETRES:  nom   : ima</span>
00354 <span class="comment">*              type  : PPIMAGE</span>
00355 <span class="comment">*              role  : Pointeur vers l'image source</span>
00356 <span class="comment">* </span>
00357 <span class="comment">*            nom   : moy</span>
00358 <span class="comment">*         type  : double *</span>
00359 <span class="comment">*         role  : Pointeur vers la Moy</span>
00360 <span class="comment">* </span>
00361 <span class="comment">*         nom   : var</span>
00362 <span class="comment">*         type  : double *</span>
00363 <span class="comment">*         role  : Pointeur vers la Var</span>
00364 <span class="comment">* * </span>
00365 <span class="comment">* EXEMPLE:</span>
00366 <span class="comment">* </span>
00367 <span class="comment">******************************************************** END DESCRIPTION */</span>
00368 
<a name="l00378"></a><a class="code" href="imamax_8c.html#a5">00378</a> <span class="preprocessor">#define CCMV(t1) for (i=0;i&lt;Y;i++) for (j=0;j&lt;X;j++)            \</span>
00379 <span class="preprocessor">         *moy += (double) ((t1)ima)[i][j];      \</span>
00380 <span class="preprocessor">      *moy = *moy /((double)X*(double)Y);    \</span>
00381 <span class="preprocessor">       for (i=0;i&lt;Y;i++) for (j=0;j&lt;X;j++)      \</span>
00382 <span class="preprocessor">         *var += pow((*moy - ((t1)ima)[i][j]),2.0);</span>
00383 <span class="preprocessor"></span>
<a name="l00384"></a><a class="code" href="imamax_8c.html#a11">00384</a> <span class="keywordtype">int</span> <a class="code" href="imamax_8c.html#a11">IdImaMoyVar</a> (
00385    PPIMAGE ima,
00386    <span class="keywordtype">double</span>  *moy,
00387    <span class="keywordtype">double</span>  *var)
00388 {
00389 <span class="keywordtype">int</span> i,j,X,Y;
00390   X=<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(ima);
00391   Y=<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(ima);
00392 
00393  *moy = 0.0;
00394  *var = 0.0;
00395   <span class="keywordflow">switch</span>(<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima))
00396     {
00397      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>:    <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>);    <span class="keywordflow">break</span>;
00398      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a0">IMA_CHAR</a>:     <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a24">PPIMAGE_CHAR</a>);     <span class="keywordflow">break</span>;
00399      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a3">IMA_USHORT</a>:   <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a>);   <span class="keywordflow">break</span>;
00400      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a2">IMA_SHORT</a>:    <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a31">PPIMAGE_SHORT</a>);    <span class="keywordflow">break</span>;
00401      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a4">IMA_LONG</a>:     <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a33">PPIMAGE_LONG</a>);     <span class="keywordflow">break</span>;
00402      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a5">IMA_ULONG</a>:    <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a34">PPIMAGE_ULONG</a>);    <span class="keywordflow">break</span>;
00403      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a6">IMA_FLOAT</a>:    <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a>);    <span class="keywordflow">break</span>;
00404      <span class="keywordflow">case</span> <a class="code" href="idima-ido_8h.html#a7">IMA_DOUBLE</a>:   <a class="code" href="imamax_8c.html#a5">CCMV</a>(<a class="code" href="idima-ido_8h.html#a27">PPIMAGE_DOUBLE</a>);   <span class="keywordflow">break</span>;
00405      <span class="keywordflow">default</span>:
00406        <a class="code" href="kerprint_8c.html#a4">IdPrintf</a>(<span class="stringliteral">"Type %d non traitable par la fonction IdImaMoyVar !\n"</span>,<a class="code" href="imabasic_8c.html#a7">IdImaType</a>(ima));
00407    <a class="code" href="iderr_8h.html#a65">IdErrno</a>=<a class="code" href="iderr_8h.html#a15">IDERR_WRONG_LIBTYPE</a>;
00408       <span class="keywordflow">return</span>(0);
00409     } <span class="comment">/* Fin du switch */</span>
00410 
00411  *var = *var /((<span class="keywordtype">double</span>)X*(<span class="keywordtype">double</span>)Y);
00412  <span class="keywordflow">return</span>(1);
00413 
00414  }
00415 
00416 
00417 
00418 <span class="comment">/* FUNCTION DESCRIPTION **************************************************</span>
00419 <span class="comment">* </span>
00420 <span class="comment">* IdImaDyn   (fonction)</span>
00421 <span class="comment">* </span>
00422 <span class="comment">* RESUME: Calcule la dynamique d'une image non COMPLEX (reel)</span>
00423 <span class="comment">* </span>
00424 <span class="comment">* DESCRIPTION: Calcule la dynamique d'une image non COMPLEX (reel)</span>
00425 <span class="comment">* </span>
00426 <span class="comment">* SYNTAXE:     double dyn = IdImaDyn (PPIMAGE image);</span>
00427 <span class="comment">* </span>
00428 <span class="comment">* RETOUR:      type  : double</span>
00429 <span class="comment">*              role  : Dynamique de l'image.</span>
00430 <span class="comment">* </span>
00431 <span class="comment">* PARAMETRES:  nom   : ima</span>
00432 <span class="comment">*              type  : PPIMAGE</span>
00433 <span class="comment">*              role  : Pointeur vers l'image source</span>
00434 <span class="comment">* </span>
00435 <span class="comment">* FICHIER:     IMAMAX.c</span>
00436 <span class="comment">* </span>
00437 <span class="comment">* EXEMPLE:</span>
00438 <span class="comment">* </span>
00439 <span class="comment">******************************************************** END DESCRIPTION */</span>
00440 
00441 
<a name="l00449"></a><a class="code" href="imamax_8c.html#a12">00449</a> <span class="keywordtype">double</span> <a class="code" href="imamax_8c.html#a12">IdImaDyn</a> (PPIMAGE ima)
00450 {
00451  <span class="keywordtype">double</span> dyn;
00452 
00453  dyn = (<span class="keywordtype">double</span>)<a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>(ima) -(<span class="keywordtype">double</span>)<a class="code" href="imamax_8c.html#a6">IdImaMinima</a>(ima);
00454  <span class="keywordflow">return</span>(dyn);
00455 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 20 14:28:14 2006 for SIMRI3D by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
