<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIMRI3D: object.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>object.c</h1><a href="object_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*************************************************************************</span>
00002 <span class="comment">* $Id: object.c,v 1.12 2006/12/19 15:09:53 yougz Exp $</span>
00003 <span class="comment">**************************************************************************</span>
00004 <span class="comment"> This software is governed by the CeCILL  license under French law and</span>
00005 <span class="comment">  abiding by the rules of distribution of free software.  You can  use, </span>
00006 <span class="comment">  modify and/ or redistribute the software under the terms of the CeCILL</span>
00007 <span class="comment">  license as circulated by CEA, CNRS and INRIA at the following URL</span>
00008 <span class="comment">  "http://www.cecill.info". </span>
00009 <span class="comment">  </span>
00010 <span class="comment">  As a counterpart to the access to the source code and  rights to copy,</span>
00011 <span class="comment">  modify and redistribute granted by the license, users are provided only</span>
00012 <span class="comment">  with a limited warranty  and the software's author,  the holder of the</span>
00013 <span class="comment">  economic rights,  and the successive licensors  have only  limited</span>
00014 <span class="comment">  liability. </span>
00015 <span class="comment">  </span>
00016 <span class="comment">  In this respect, the user's attention is drawn to the risks associated</span>
00017 <span class="comment">  with loading,  using,  modifying and/or developing or reproducing the</span>
00018 <span class="comment">  software by the user in light of its specific status of free software,</span>
00019 <span class="comment">  that may mean  that it is complicated to manipulate,  and  that  also</span>
00020 <span class="comment">  therefore means  that it is reserved for developers  and  experienced</span>
00021 <span class="comment">  professionals having in-depth computer knowledge. Users are therefore</span>
00022 <span class="comment">  encouraged to load and test the software's suitability as regards their</span>
00023 <span class="comment">  requirements in conditions enabling the security of their systems and/or </span>
00024 <span class="comment">  data to be ensured and,  more generally, to use and operate it in the </span>
00025 <span class="comment">  same conditions as regards security. </span>
00026 <span class="comment">  </span>
00027 <span class="comment">  The fact that you are presently reading this means that you have had</span>
00028 <span class="comment">  knowledge of the CeCILL license and that you accept its terms.</span>
00029 <span class="comment">  </span>
00030 <span class="comment">  Copyright (c) CREATIS (Centre de Recherche et d'Applications en Traitement de</span>
00031 <span class="comment">  l'Image). All rights reserved. See License.txt for details.</span>
00032 <span class="comment">  </span>
00033 <span class="comment">  Version 2.0  20/12/2006</span>
00034 <span class="comment">*************************************************************************/</span>
00035 <span class="preprocessor">#include "<a class="code" href="object_8h.html">object.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="object-simple_8h.html">object-simple.h</a>"</span>
00037 <span class="preprocessor">#include "<a class="code" href="object-ki_8h.html">object-ki.h</a>"</span>
00038 <span class="preprocessor">#include "<a class="code" href="object-compound_8h.html">object-compound.h</a>"</span>
00039 <span class="preprocessor">#include "<a class="code" href="object-brain_8h.html">object-brain.h</a>"</span>
00040 
00041 <span class="preprocessor">#include &lt;<a class="code" href="idseq_8h.html">idseq.h</a>&gt;</span>
00042 <span class="preprocessor">#include &lt;<a class="code" href="idacr_8h.html">idacr.h</a>&gt;</span>
00043 <span class="preprocessor">#include &lt;string.h&gt;</span>
00044 <span class="preprocessor">#include &lt;<a class="code" href="idvol_8h.html">idvol.h</a>&gt;</span>
00045 <span class="preprocessor">#include "<a class="code" href="display_8h.html">display.h</a>"</span>
00046 
<a name="l00062"></a><a class="code" href="group__Object.html#ga8">00062</a> <a class="code" href="object_8h.html#a7">OBJECT3D</a>* <a class="code" href="group__Object.html#ga8">GetTestObject2D</a>(<span class="keywordtype">int</span> obj, <span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y, <span class="keywordtype">double</span> db0)
00063    {
00064     <a class="code" href="object_8h.html#a7">OBJECT3D</a>  *<a class="code" href="jmemsys_8h.html#a3">object</a>;
00065    <a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a> vol,label;
00066    <a class="code" href="idima-ido_8h.html#a26">PPIMAGE_FLOAT</a> value;
00067    <span class="keywordtype">int</span> z;
00068 
00069    z=1;
00070     <span class="keywordflow">switch</span>(obj)
00071    {
00072     <span class="keywordflow">case</span> 1:
00073     {
00074     <a class="code" href="jmemsys_8h.html#a3">object</a>=<a class="code" href="group__Object.html#ga9">Create2DTestObjectCircleEllipseSquare</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y);
00075     <span class="keywordflow">break</span>;  
00076     }
00077    <span class="keywordflow">case</span> 2:
00078     {
00079    <span class="comment">/* tacq=8, TE=20 TR=2500 gives a nice contrast with this object*/</span>
00080     <a class="code" href="jmemsys_8h.html#a3">object</a>=<a class="code" href="group__Object.html#ga1">CreateObjectBiComponent2DCircle</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y);
00081     <span class="keywordflow">break</span>;
00082     }
00083    <span class="keywordflow">case</span> 3:
00084     {
00085     <a class="code" href="jmemsys_8h.html#a3">object</a>=<a class="code" href="group__Object.html#ga8">CreateObject2DCircleKi</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y);
00086     <span class="keywordflow">break</span>;
00087     }
00088    <span class="keywordflow">case</span> 5:
00089     {
00090     <a class="code" href="jmemsys_8h.html#a3">object</a>=<a class="code" href="group__Object.html#ga2">CreateSphericalObject</a>((<span class="keywordtype">int</span>)(<a class="code" href="jerror_8h.html#a52a35">x</a>/2.5),<a class="code" href="jerror_8h.html#a52a35">x</a>,y,1,(<span class="keywordtype">int</span>)<a class="code" href="jerror_8h.html#a52a35">x</a>/2,(<span class="keywordtype">int</span>)y/2,1,500,70,77,0,0,0,1);
00091     <span class="keywordflow">break</span>;
00092     }
00093    <span class="keywordflow">case</span> 4: <span class="comment">/* Brain */</span>
00094     {
00095       <span class="comment">// tacq=10.0; TE=25.0; TR=500.0;   /* T1 contrast */</span>
00096       <span class="comment">// tacq=10.0; TE=100.0; TR=2000.0; /* T2 contrast */</span>
00097       <span class="comment">// tacq=10.0; TE=22.0; TR=2000.0;  /* ro contrast */</span>
00098       vol = <a class="code" href="group__Object.html#ga0">ReadLabelVolume</a>(<span class="stringliteral">"../data/brainbic/brainlabelz126.raw"</span>,256,256,1);
00099      <span class="keywordflow">switch</span>(<a class="code" href="jerror_8h.html#a52a35">x</a>)
00100      {
00101      <span class="keywordflow">case</span> 256:
00102      {
00103       label= <a class="code" href="group__Object.html#ga3">GetVolumeVOI</a>(vol,0,0,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z);
00104      }
00105      <span class="keywordflow">break</span>;
00106      <span class="keywordflow">case</span> 128:
00107      {
00108       label= <a class="code" href="group__Object.html#ga3">GetVolumeVOI</a>(vol,38,24,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z);
00109      }
00110      <span class="keywordflow">break</span>;
00111      <span class="keywordflow">case</span> 64:
00112      {
00113       label= <a class="code" href="group__Object.html#ga3">GetVolumeVOI</a>(vol,38,24,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z);
00114      }
00115      <span class="keywordflow">break</span>;
00116      <span class="keywordflow">default</span>:
00117      {
00118        <a class="code" href="jerror_8h.html#a52a35">x</a>=32;y=32;z=1;
00119       label= <a class="code" href="group__Object.html#ga3">GetVolumeVOI</a>(vol,60,60,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z);
00120      }
00121      <span class="keywordflow">break</span>;
00122      }
00123        <a class="code" href="idvol_8h.html#a41">IdVolFree</a>(vol);
00124       value = <a class="code" href="group__Object.html#ga2">GetBrainPhysicalValues</a>(1.0);
00125       <a class="code" href="jmemsys_8h.html#a3">object</a> = <a class="code" href="group__Object.html#ga1">LabelToObject</a>(label,value);
00126       <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(value);
00127     <span class="keywordflow">break</span>;
00128     }
00129    <span class="keywordflow">default</span>:
00130     {
00131      printf(<span class="stringliteral">"Unknown object number !!\n"</span>);
00132     exit(0);    
00133     <span class="keywordflow">break</span>;
00134     }
00135    }
00136    <a class="code" href="group__Object.html#ga15">SetObjectSize</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>,(<span class="keywordtype">float</span>)0.2,(<span class="keywordtype">float</span>)0.2,(<span class="keywordtype">float</span>)0.002);
00137    <a class="code" href="group__Object.html#ga16">SetObjectDeltaB0</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>,db0);
00138    
00139    <span class="keywordflow">return</span>(<a class="code" href="jmemsys_8h.html#a3">object</a>);
00140 }
00141 
<a name="l00158"></a><a class="code" href="group__Object.html#ga9">00158</a> <a class="code" href="object_8h.html#a7">OBJECT3D</a>* <a class="code" href="group__Object.html#ga9">GetTestObject3D</a>(<span class="keywordtype">int</span> obj, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> z, <span class="keywordtype">double</span> db0)
00159    {
00160     <a class="code" href="object_8h.html#a7">OBJECT3D</a>  *<a class="code" href="jmemsys_8h.html#a3">object</a>;
00161 
00162    <span class="keywordflow">switch</span>(obj)
00163    {
00164    <span class="keywordflow">case</span> 1:
00165     {
00166      <a class="code" href="jmemsys_8h.html#a3">object</a>=<a class="code" href="group__Object.html#ga4">CreateObject3DSphereEllipse</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z);
00167     <span class="keywordflow">break</span>;  
00168     }
00169    <span class="keywordflow">case</span> 2:
00170     {
00171     <a class="code" href="jmemsys_8h.html#a3">object</a>=<a class="code" href="group__Object.html#ga3">CreateObjectBiComponent3DSphere</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z);
00172     <span class="keywordflow">break</span>;
00173     }
00174    <span class="keywordflow">default</span>:
00175     {
00176      printf(<span class="stringliteral">"Unknown object number !!\n"</span>);
00177     exit(0);    
00178     <span class="keywordflow">break</span>;
00179     }
00180    }
00181    <a class="code" href="group__Object.html#ga15">SetObjectSize</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>,(<span class="keywordtype">float</span>)0.2,(<span class="keywordtype">float</span>)0.2,(<span class="keywordtype">float</span>)0.2);
00182    <a class="code" href="group__Object.html#ga16">SetObjectDeltaB0</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>,db0);
00183    
00184    <span class="keywordflow">return</span>(<a class="code" href="jmemsys_8h.html#a3">object</a>);
00185 }
00186 
00187 
<a name="l00195"></a><a class="code" href="group__Object.html#ga13">00195</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga13">SaveObjectAsVolFloat</a>(OBJECT3D *object)
00196 {
00197   <a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a> volfloat;
00198   <span class="keywordtype">int</span> <a class="code" href="jerror_8h.html#a52a35">x</a>,y,z;
00199   <span class="keywordtype">int</span> i,j,k;
00200   <span class="keywordtype">char</span> nom[80];
00201   nom[0]=<span class="charliteral">'\0'</span>;
00202 
00203   <a class="code" href="jerror_8h.html#a52a35">x</a>=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;x; 
00204   y=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;y;
00205   z=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;z;
00206 
00207   volfloat = (<a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a>) <a class="code" href="volallo_8c.html#a1">IdVolAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,<a class="code" href="idvol-ido_8h.html#a6">VOL_FLOAT</a>);
00208   <span class="keywordflow">if</span> (!volfloat)
00209   {
00210     printf(<span class="stringliteral">"Impossible d'allouer volfloat ! \n"</span>);
00211    exit(0);
00212   }
00213 
00214   <span class="keywordflow">for</span>(k=0;k&lt;z;k++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)
00215    volfloat[k][j][i] = (<span class="keywordtype">float</span>) <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[0][k][j][i];
00216   strcpy(nom,<span class="stringliteral">"volWATERro.vol"</span>);
00217   <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(nom,volfloat);  
00218 
00219   <span class="keywordflow">for</span>(k=0;k&lt;z;k++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)
00220    volfloat[k][j][i] = (<span class="keywordtype">float</span>) <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[1][k][j][i];
00221   strcpy(nom,<span class="stringliteral">"volWATERt1.vol"</span>);
00222   <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(nom,volfloat);  
00223   
00224   <span class="keywordflow">for</span>(k=0;k&lt;z;k++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)
00225    volfloat[k][j][i] = (<span class="keywordtype">float</span>) <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[2][k][j][i];
00226   strcpy(nom,<span class="stringliteral">"volWATERt2.vol"</span>);
00227   <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(nom,volfloat);  
00228   
00229   <span class="keywordflow">if</span> (<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;component ==2)
00230   {
00231   <span class="keywordflow">for</span>(k=0;k&lt;z;k++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)
00232    volfloat[k][j][i] = (<span class="keywordtype">float</span>) <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[3][k][j][i];
00233   strcpy(nom,<span class="stringliteral">"volFATro.vol"</span>);
00234   <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(nom,volfloat);  
00235   
00236 
00237  <span class="keywordflow">for</span>(k=0;k&lt;z;k++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)
00238    volfloat[k][j][i] = (<span class="keywordtype">float</span>) <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[4][k][j][i];
00239   strcpy(nom,<span class="stringliteral">"volFATt1.vol"</span>);
00240   <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(nom,volfloat);  
00241   
00242   <span class="keywordflow">for</span>(k=0;k&lt;z;k++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)
00243    volfloat[k][j][i] = (<span class="keywordtype">float</span>) <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[5][k][j][i];
00244   strcpy(nom,<span class="stringliteral">"volFATt2.vol"</span>);
00245   <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(nom,volfloat);
00246   <a class="code" href="idvol_8h.html#a41">IdVolFree</a>(volfloat);
00247   }
00248 }
00249 
<a name="l00262"></a><a class="code" href="group__Object.html#ga10">00262</a> <a class="code" href="object_8h.html#a7">OBJECT3D</a>* <a class="code" href="group__Object.html#ga10">AllocObject</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> z, <span class="keywordtype">int</span> nbcomp, <span class="keywordtype">int</span> nbparam)
00263 {
00264  <a class="code" href="object_8h.html#a7">OBJECT3D</a> *<a class="code" href="jmemsys_8h.html#a3">object</a>;
00265  <span class="keywordtype">int</span> i,j,k,t;
00266  <span class="keywordtype">int</span> nbvol;
00267 
00268  nbvol = nbcomp*nbparam;
00269 
00270  <a class="code" href="jmemsys_8h.html#a3">object</a> = (<a class="code" href="object_8h.html#a7">OBJECT3D</a> *) malloc(<span class="keyword">sizeof</span>(<a class="code" href="object_8h.html#a7">OBJECT3D</a>));
00271  <span class="keywordflow">if</span> (!<a class="code" href="jmemsys_8h.html#a3">object</a>)
00272   {
00273    printf(<span class="stringliteral">"Unable to allocate an OBJECT3D ! \n"</span>);
00274    exit(0);
00275   }
00276 
00277  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values = (<a class="code" href="idseq-ido_8h.html#a48">PPPPSEQUENCE_USHORT</a>) <a class="code" href="seqallo_8c.html#a1">IdSeqAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,nbvol,<a class="code" href="idseq-ido_8h.html#a3">SEQ_USHORT</a>);
00278  <span class="keywordflow">if</span> (!<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values)
00279   {
00280    printf(<span class="stringliteral">"Unable to allocate a SEQUENCE ! \n"</span>);
00281    exit(0);
00282   }
00283 
00284  <span class="keywordflow">for</span> (t=0;t&lt;nbvol;t++)  
00285  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span> (j=0;j&lt;y;j++) <span class="keywordflow">for</span> (k=0;k&lt;z;k++) 
00286   {
00287    <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[t][k][j][i]=0;
00288   }
00289 
00290  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;chemshift = (<a class="code" href="idsig-ido_8h.html#a28">PSIGNAL_FLOAT</a>)<a class="code" href="sigallo_8c.html#a1">IdSigAlloc</a>(nbcomp,<a class="code" href="idsig-ido_8h.html#a6">SIG_FLOAT</a>);
00291  <span class="keywordflow">if</span> (!<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;chemshift)
00292   {
00293    printf(<span class="stringliteral">"Unable to allocate SIGNAL! \n"</span>);
00294    exit(0);
00295   }
00296  <span class="keywordflow">for</span> (t=0;t&lt;nbcomp;t++) 
00297   {
00298    <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;chemshift[t]=0.0;
00299   } 
00300 
00301 <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;deltaB0 = (<a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a>)<a class="code" href="volallo_8c.html#a1">IdVolAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,<a class="code" href="idvol-ido_8h.html#a6">VOL_FLOAT</a>);
00302  <span class="keywordflow">if</span> (!<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;deltaB0)
00303   {
00304    printf(<span class="stringliteral">"Unable to allocate VOLUME! \n"</span>);
00305    exit(0);
00306   }
00307    
00308  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span> (j=0;j&lt;y;j++) <span class="keywordflow">for</span> (k=0;k&lt;z;k++) 
00309   {
00310    <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;deltaB0[k][j][i]=0.0;
00311   }
00312 
00313 <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;fielddefault = (<a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a>)<a class="code" href="volallo_8c.html#a1">IdVolAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,<a class="code" href="idvol-ido_8h.html#a6">VOL_FLOAT</a>);
00314  <span class="keywordflow">if</span> (!<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;fielddefault)
00315   {
00316    printf(<span class="stringliteral">"Unable to allocate VOLUME! \n"</span>);
00317    exit(0);
00318   }
00319    
00320  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span> (j=0;j&lt;y;j++) <span class="keywordflow">for</span> (k=0;k&lt;z;k++) 
00321   {
00322    <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;fielddefault[k][j][i]=0.0;
00323   }
00324 
00325  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;x=<a class="code" href="jerror_8h.html#a52a35">x</a>; <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;y=y;<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;z=z;
00326  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbcomponent=nbcomp;
00327  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbparam=nbparam;
00328  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;component=0; <span class="comment">/* Default active component = 0 */</span>
00329   
00330  <span class="comment">/* We give to the object a size of 1x1x1 meter */</span>
00331  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;lx=1.0; <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;ly=1.0;<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;lz=1.0;
00332    
00333  <span class="keywordflow">return</span>(<a class="code" href="jmemsys_8h.html#a3">object</a>);
00334 }
00335 
<a name="l00342"></a><a class="code" href="group__Object.html#ga11">00342</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga11">FreeObject</a>(OBJECT3D * object)
00343 {
00344  <a class="code" href="idseq-base_8h.html#a0">IdSeqFree</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values);
00345  <a class="code" href="idvol_8h.html#a41">IdVolFree</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;fielddefault);
00346  <a class="code" href="idvol_8h.html#a41">IdVolFree</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;deltaB0);
00347  <span class="keywordflow">if</span> (<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;chemshift!=NULL) <a class="code" href="idsig-base_8h.html#a0">IdSigFree</a>(<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;chemshift); 
00348  free(<a class="code" href="jmemsys_8h.html#a3">object</a>);
00349 }
00350 
<a name="l00361"></a><a class="code" href="group__Object.html#ga15">00361</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga15">SetObjectSize</a>(OBJECT3D *object, <span class="keywordtype">float</span> lx, <span class="keywordtype">float</span> ly, <span class="keywordtype">float</span> lz)
00362 {
00363  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;lx = lx;
00364  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;ly = ly;
00365  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;lz = lz;
00366 }
00367 
<a name="l00375"></a><a class="code" href="group__Object.html#ga18">00375</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga18">SetObjectActiveComponent</a>(OBJECT3D *object, <span class="keywordtype">int</span> component)
00376 {
00377  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;component = component;
00378 }
00379 
<a name="l00388"></a><a class="code" href="group__Object.html#ga16">00388</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga16">SetObjectDeltaB0</a>(OBJECT3D *object, <span class="keywordtype">double</span> deltab0)
00389 {
00390  <span class="keywordtype">int</span> i,j,k;
00391  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;x;i++) <span class="keywordflow">for</span> (j=0;j&lt;<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;y;j++) <span class="keywordflow">for</span> (k=0;k&lt;<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;z;k++) 
00392   {
00393    <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;deltaB0[k][j][i]=(<span class="keywordtype">float</span>) deltab0;
00394   }
00395 }
00396 
<a name="l00405"></a><a class="code" href="group__Object.html#ga17">00405</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga17">SetObjectChemicalShift</a>(OBJECT3D * object,<span class="keywordtype">float</span> edw,<span class="keywordtype">int</span> component)
00406 {
00407  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;chemshift[component]=edw;
00408 }
00409 
00410 
<a name="l00424"></a><a class="code" href="group__Object.html#ga19">00424</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga19">SetObjectPoint</a>(OBJECT3D *object,<span class="keywordtype">int</span> x,<span class="keywordtype">int</span> y,<span class="keywordtype">int</span> z,
00425                <span class="keywordtype">int</span> ro,<span class="keywordtype">int</span> t1,<span class="keywordtype">int</span> t2,<span class="keywordtype">int</span> component
00426                )
00427 {   
00428  <span class="keywordtype">int</span> i;
00429  i=component*<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbparam;
00430  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[0+i][z][y][<a class="code" href="jerror_8h.html#a52a35">x</a>] = ro; 
00431  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[1+i][z][y][<a class="code" href="jerror_8h.html#a52a35">x</a>] = t1;
00432  <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[2+i][z][y][<a class="code" href="jerror_8h.html#a52a35">x</a>] = t2;
00433 }
00434 
<a name="l00443"></a><a class="code" href="group__Object.html#ga12">00443</a> <span class="keywordtype">void</span> <a class="code" href="group__Object.html#ga12">WriteObject</a>(OBJECT3D * object, <span class="keywordtype">char</span> * name)
00444 {
00445  <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(name,(<a class="code" href="idseq-ido_8h.html#a40">PPPPSEQUENCE</a>)<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values);
00446 }
00447  
<a name="l00456"></a><a class="code" href="group__Object.html#ga14">00456</a> <a class="code" href="object_8h.html#a7">OBJECT3D</a>* <a class="code" href="group__Object.html#ga14">ReadObject</a>(<span class="keywordtype">char</span> * name)
00457 {
00458   <a class="code" href="idseq-ido_8h.html#a48">PPPPSEQUENCE_USHORT</a> seq;
00459   <a class="code" href="object_8h.html#a7">OBJECT3D</a> * <a class="code" href="jmemsys_8h.html#a3">object</a>;
00460   <span class="keywordtype">int</span> <a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,nbparam,nbcomp,nbvol;
00461   <span class="keywordtype">int</span> t,i,j,k;
00462   <span class="keywordtype">float</span> lx,ly,lz;
00463   
00464   seq = (<a class="code" href="idseq-ido_8h.html#a48">PPPPSEQUENCE_USHORT</a>) <a class="code" href="idacr_8h.html#a72">IdAcrReadFile</a>(name,<a class="code" href="idseq-ido_8h.html#a3">SEQ_USHORT</a>);
00465   <a class="code" href="jerror_8h.html#a52a35">x</a> = <a class="code" href="idseq-ido_8h.html#a21">IdSeqDimX</a>(seq);
00466   y = <a class="code" href="idseq-ido_8h.html#a22">IdSeqDimY</a>(seq);
00467   z = <a class="code" href="idseq-ido_8h.html#a23">IdSeqDimZ</a>(seq);
00468   nbvol = <a class="code" href="idseq-ido_8h.html#a24">IdSeqDimT</a>(seq);
00469 
00470  <span class="keywordflow">if</span> (nbvol&gt;3)
00471    {
00472   nbparam=3; <span class="comment">/* Default value : ro,t1,t2 */</span>
00473   nbcomp= 2; <span class="comment">/* Default value : 2, WATER and FAT*/</span>
00474    }
00475    <span class="keywordflow">else</span>
00476    {
00477   nbparam=3; <span class="comment">/* Default value : ro,t1,t2 */</span>
00478   nbcomp= 1; <span class="comment">/* Default value : 1, WATER */</span>
00479     }
00480   lx=1.0; ly=1.0; lz=1.0;
00481 
00482   <a class="code" href="jmemsys_8h.html#a3">object</a> = (<a class="code" href="object_8h.html#a7">OBJECT3D</a> *) <a class="code" href="group__Object.html#ga10">AllocObject</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,nbcomp,nbparam);
00483   <span class="keywordflow">for</span>(t=0;t&lt;nbvol;t++)
00484   <span class="keywordflow">for</span>(i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span>(k=0;k&lt;z;k++) 
00485   {
00486      <span class="comment">/* Not very efficient, better possible using memcpy ! */</span>
00487      <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[t][k][j][i]=seq[t][k][j][i];   
00488   }
00489   <a class="code" href="idseq-base_8h.html#a0">IdSeqFree</a>(seq);
00490   
00491   <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbcomponent=nbcomp;
00492   <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbparam=nbparam;
00493   <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;lx=lx; <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;ly=ly; <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;lz=lz;
00494   <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;x=<a class="code" href="jerror_8h.html#a52a35">x</a>;   <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;y=y;   <a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;z=z;
00495 
00496   <span class="keywordflow">return</span>(<a class="code" href="jmemsys_8h.html#a3">object</a>);
00497 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 20 14:28:14 2006 for SIMRI3D by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
