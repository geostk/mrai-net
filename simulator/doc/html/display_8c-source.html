<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIMRI3D: display.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a></div>
<h1>display.c</h1><a href="display_8c.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 <span class="comment">/*************************************************************************</span>
00002 <span class="comment">* $Id: display.c,v 1.11 2006/12/18 15:10:36 yougz Exp $</span>
00003 <span class="comment">**************************************************************************</span>
00004 <span class="comment"> This software is governed by the CeCILL  license under French law and</span>
00005 <span class="comment">  abiding by the rules of distribution of free software.  You can  use, </span>
00006 <span class="comment">  modify and/ or redistribute the software under the terms of the CeCILL</span>
00007 <span class="comment">  license as circulated by CEA, CNRS and INRIA at the following URL</span>
00008 <span class="comment">  "http://www.cecill.info". </span>
00009 <span class="comment">  </span>
00010 <span class="comment">  As a counterpart to the access to the source code and  rights to copy,</span>
00011 <span class="comment">  modify and redistribute granted by the license, users are provided only</span>
00012 <span class="comment">  with a limited warranty  and the software's author,  the holder of the</span>
00013 <span class="comment">  economic rights,  and the successive licensors  have only  limited</span>
00014 <span class="comment">  liability. </span>
00015 <span class="comment">  </span>
00016 <span class="comment">  In this respect, the user's attention is drawn to the risks associated</span>
00017 <span class="comment">  with loading,  using,  modifying and/or developing or reproducing the</span>
00018 <span class="comment">  software by the user in light of is specific status of free software,</span>
00019 <span class="comment">  that may mean  that it is complicated to manipulate,  and  that  also</span>
00020 <span class="comment">  therefore means  that it is reserved for developers  and  experienced</span>
00021 <span class="comment">  professionals having in-depth computer knowledge. Users are therefore</span>
00022 <span class="comment">  encouraged to load and test the software's suitability as regards their</span>
00023 <span class="comment">  requirements in conditions enabling the security of their systems and/or </span>
00024 <span class="comment">  data to be ensured and,  more generally, to use and operate it in the </span>
00025 <span class="comment">  same conditions as regards security. </span>
00026 <span class="comment">  </span>
00027 <span class="comment">  The fact that you are presently reading this means that you have had</span>
00028 <span class="comment">  knowledge of the CeCILL license and that you accept its terms.</span>
00029 <span class="comment">  </span>
00030 <span class="comment">  Copyright (c) CREATIS (Centre de Recherche et d'Applications en Traitement de</span>
00031 <span class="comment">  l'Image). All rights reserved. See License.txt for details.</span>
00032 <span class="comment">  </span>
00033 <span class="comment">  Version 2.0  20/12/2006</span>
00034 <span class="comment">*************************************************************************/</span>
00035 <span class="preprocessor">#include "<a class="code" href="display_8h.html">display.h</a>"</span>
00036 <span class="preprocessor">#include &lt;string.h&gt;</span>
00037 
<a name="l00048"></a><a class="code" href="group__Display.html#ga0">00048</a> <span class="keywordtype">void</span> <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(PPIMAGE_UCHAR image)
00049 {
00050  
00051 <span class="preprocessor"> #if ! defined(BROKEN_IDIMADISPLAY)</span>
00052 <span class="preprocessor"></span>    <a class="code" href="idima-calc_8h.html#a10">IdImaDisplay</a>(<a class="code" href="jerror_8h.html#a52a44">image</a>,0,0,0,<a class="code" href="imabasic_8c.html#a5">IdImaDimX</a>(<a class="code" href="jerror_8h.html#a52a44">image</a>),<a class="code" href="imabasic_8c.html#a4">IdImaDimY</a>(<a class="code" href="jerror_8h.html#a52a44">image</a>),0,0);
00053 <span class="preprocessor"> #endif</span>
00054 <span class="preprocessor"></span>
00055 }
<a name="l00064"></a><a class="code" href="group__Display.html#ga1">00064</a> <span class="keywordtype">void</span> <a class="code" href="group__Display.html#ga1">DisplayObject3D</a>(<a class="code" href="object_8h.html#a7">OBJECT3D</a>* object,<span class="keywordtype">int</span> deb,<span class="keywordtype">int</span> nb,<span class="keywordtype">char</span> *visuname)
00065 {
00066  <a class="code" href="idvol-ido_8h.html#a42">PPPVOLUME_USHORT</a> vol;
00067  <span class="keywordtype">int</span> <a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,i,j,k;
00068  <span class="keywordtype">char</span> txt[80];
00069   
00070  <a class="code" href="jerror_8h.html#a52a35">x</a>=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;x;
00071  y=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;y;
00072  z=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;z;
00073  
00074  vol =(<a class="code" href="idvol-ido_8h.html#a42">PPPVOLUME_USHORT</a>) <a class="code" href="volallo_8c.html#a1">IdVolAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,z,<a class="code" href="idvol-ido_8h.html#a3">VOL_USHORT</a>);
00075  <span class="keywordflow">if</span> (!vol)
00076   {
00077    printf(<span class="stringliteral">"Unable to allocate a ushort volume in DisplayOBJECT3D !\n"</span>);
00078    exit(0);
00079   }
00080  
00081  <span class="comment">/* Display the first component considered to be water */</span>
00082  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span>(k=0;k&lt;z;k++)  <span class="comment">/* T1 */</span>
00083        vol[k][j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a5">T1</a>][k][j][i];
00084  strcpy(txt,visuname);
00085  strcat(txt,<span class="stringliteral">"-T1 water"</span>);
00086  <a class="code" href="group__Display.html#ga4">DisplayVol</a>((<a class="code" href="idvol-ido_8h.html#a34">PPPVOLUME</a>)vol,0,z,0,255,txt,0,<span class="stringliteral">"\0"</span>);
00087 
00088  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span>(k=0;k&lt;z;k++)  <span class="comment">/* T2 */</span>
00089        vol[k][j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a6">T2</a>][k][j][i];
00090  strcpy(txt,visuname);
00091  strcat(txt,<span class="stringliteral">"-T2 water"</span>);
00092  <a class="code" href="group__Display.html#ga4">DisplayVol</a>((<a class="code" href="idvol-ido_8h.html#a34">PPPVOLUME</a>)vol,0,z,0,255,txt,0,<span class="stringliteral">"\0"</span>);
00093 
00094  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span>(k=0;k&lt;z;k++)  <span class="comment">/* RO */</span>
00095        vol[k][j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a4">RO</a>][k][j][i];
00096  strcpy(txt,visuname);
00097  strcat(txt,<span class="stringliteral">"-RO water"</span>);
00098  <a class="code" href="group__Display.html#ga4">DisplayVol</a>((<a class="code" href="idvol-ido_8h.html#a34">PPPVOLUME</a>)vol,0,z,0,255,txt,0,<span class="stringliteral">"\0"</span>);
00099 
00100 <span class="comment">/* Display the second component considered to be fat */</span>
00101 <span class="keywordflow">if</span> (<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbcomponent&gt;1)
00102 {
00103 <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span>(k=0;k&lt;z;k++)  <span class="comment">/* T1 */</span>
00104        vol[k][j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[4][k][j][i];
00105  strcpy(txt,visuname);
00106  strcat(txt,<span class="stringliteral">"-T1 Fat"</span>);
00107  <a class="code" href="group__Display.html#ga4">DisplayVol</a>((<a class="code" href="idvol-ido_8h.html#a34">PPPVOLUME</a>)vol,0,z,0,255,txt,0,<span class="stringliteral">"\0"</span>);
00108 
00109  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span>(k=0;k&lt;z;k++)  <span class="comment">/* T2 */</span>
00110        vol[k][j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[5][k][j][i];
00111  strcpy(txt,visuname);
00112  strcat(txt,<span class="stringliteral">"-T2 Fat"</span>);
00113  <a class="code" href="group__Display.html#ga4">DisplayVol</a>((<a class="code" href="idvol-ido_8h.html#a34">PPPVOLUME</a>)vol,0,z,0,255,txt,0,<span class="stringliteral">"\0"</span>);
00114 
00115  <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++) <span class="keywordflow">for</span>(k=0;k&lt;z;k++)  <span class="comment">/* RO */</span>
00116        vol[k][j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[3][k][j][i];
00117  strcpy(txt,visuname);
00118  strcat(txt,<span class="stringliteral">"-RO Fat"</span>);
00119  <a class="code" href="group__Display.html#ga4">DisplayVol</a>((<a class="code" href="idvol-ido_8h.html#a34">PPPVOLUME</a>)vol,0,z,0,255,txt,0,<span class="stringliteral">"\0"</span>);
00120 }
00121 
00122  <a class="code" href="idvol_8h.html#a41">IdVolFree</a>(vol);
00123 }
00124 
00125 
<a name="l00132"></a><a class="code" href="group__Display.html#ga2">00132</a> <span class="keywordtype">void</span> <a class="code" href="group__Display.html#ga2">DisplayObject2D</a> (OBJECT3D* object,<span class="keywordtype">char</span> * visuname)
00133 {
00134    <span class="keyword">register</span> <span class="keywordtype">int</span> i,j;
00135    <span class="keywordtype">int</span> <a class="code" href="jerror_8h.html#a52a35">x</a>,y,z;
00136    <a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a> imashort;
00137    <span class="keywordtype">double</span> <a class="code" href="idmac_8h.html#a0">min</a>,<a class="code" href="idmac_8h.html#a1">max</a>;
00138    <a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a> imauchar;
00139    <span class="keywordtype">char</span> txt[80];
00140 
00141    txt[0]=<span class="charliteral">'\0'</span>;
00142 
00143    <a class="code" href="jerror_8h.html#a52a35">x</a>=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;x;
00144    y=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;y;
00145     z=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;z;
00146 
00147    <span class="keywordflow">if</span> (z!=1)
00148       printf(<span class="stringliteral">"Watchout, your object is not 2D \n!"</span>);
00149 
00150    imashort = (<a class="code" href="idima-ido_8h.html#a32">PPIMAGE_USHORT</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,<a class="code" href="idima-ido_8h.html#a2">IMA_SHORT</a>);
00151    <span class="keywordflow">if</span>(!imashort)
00152     {
00153      printf(<span class="stringliteral">"Impossible d'allouer imashort dans Displayobject2D !\n"</span>);
00154      exit(0);
00155     }
00156 
00157    imauchar = (<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,y,<a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>);
00158    <span class="keywordflow">if</span>(!imauchar)
00159     {
00160      printf(<span class="stringliteral">"Impossible d'allouer imauchar dans Displayobject2D !\n"</span>);
00161      exit(0);
00162     }
00163 
00164    <span class="comment">/* Display the first component considered to be water */</span>
00165    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)  <span class="comment">/* T1 */</span>
00166        imashort[j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a5">T1</a>][0][j][i];
00167    <a class="code" href="idmac_8h.html#a0">min</a> = <a class="code" href="imamax_8c.html#a6">IdImaMinima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00168    <a class="code" href="idmac_8h.html#a1">max</a> = <a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00169    <span class="keywordflow">if</span> (<a class="code" href="idmac_8h.html#a1">max</a>!=<a class="code" href="idmac_8h.html#a0">min</a>)
00170     {
00171      <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00172         imauchar[i][j]= (<span class="keywordtype">int</span>)((imashort[i][j]-<a class="code" href="idmac_8h.html#a0">min</a>)/(<a class="code" href="idmac_8h.html#a1">max</a>-<a class="code" href="idmac_8h.html#a0">min</a>)*255);
00173     }
00174     <span class="keywordflow">else</span> 
00175     {
00176         <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00177         imauchar[i][j]= (<span class="keywordtype">int</span>) <a class="code" href="idmac_8h.html#a0">min</a>;
00178     }
00179     strcpy(txt,visuname);
00180     strcat(txt,<span class="stringliteral">"-T1 water"</span>);
00181    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(imauchar,txt);
00182    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(imauchar);  
00183    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)  <span class="comment">/* T2 */</span>
00184        imashort[j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a6">T2</a>][0][j][i];
00185    <a class="code" href="idmac_8h.html#a0">min</a> = <a class="code" href="imamax_8c.html#a6">IdImaMinima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00186    <a class="code" href="idmac_8h.html#a1">max</a> = <a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00187    <span class="keywordflow">if</span> (<a class="code" href="idmac_8h.html#a1">max</a>!=<a class="code" href="idmac_8h.html#a0">min</a>)
00188     {
00189      <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00190         imauchar[i][j]= (<span class="keywordtype">int</span>)((imashort[i][j]-<a class="code" href="idmac_8h.html#a0">min</a>)/(<a class="code" href="idmac_8h.html#a1">max</a>-<a class="code" href="idmac_8h.html#a0">min</a>)*255);
00191     }
00192     <span class="keywordflow">else</span> 
00193     {
00194         <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00195         imauchar[i][j]= (<span class="keywordtype">int</span>) <a class="code" href="idmac_8h.html#a0">min</a>;
00196     }
00197     strcpy(txt,visuname);
00198     strcat(txt,<span class="stringliteral">"-T2 water"</span>);
00199    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(imauchar,txt);
00200    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(imauchar);  
00201    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)  <span class="comment">/*  RO */</span>
00202        imashort[j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a4">RO</a>][0][j][i];
00203    <a class="code" href="idmac_8h.html#a0">min</a> = <a class="code" href="imamax_8c.html#a6">IdImaMinima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00204    <a class="code" href="idmac_8h.html#a1">max</a> = <a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00205    <span class="keywordflow">if</span> (<a class="code" href="idmac_8h.html#a1">max</a>!=<a class="code" href="idmac_8h.html#a0">min</a>)
00206     {
00207      <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00208         imauchar[i][j]= (<span class="keywordtype">int</span>)((imashort[i][j]-<a class="code" href="idmac_8h.html#a0">min</a>)/(<a class="code" href="idmac_8h.html#a1">max</a>-<a class="code" href="idmac_8h.html#a0">min</a>)*255);
00209     }
00210     <span class="keywordflow">else</span> 
00211     {
00212         <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00213         imauchar[i][j]= (<span class="keywordtype">int</span>) <a class="code" href="idmac_8h.html#a0">min</a>;
00214     }
00215     strcpy(txt,visuname);
00216     strcat(txt,<span class="stringliteral">"-RO water"</span>);
00217    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(imauchar,txt);
00218    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(imauchar);  
00219  
00220    <span class="comment">/* Display the second component considered to be fat */</span>
00221 <span class="keywordflow">if</span> (<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbcomponent&gt;1)
00222 {
00223 <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)  <span class="comment">/* Recopie de T1 */</span>
00224        imashort[j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a5">T1</a>+3][0][j][i];
00225    <a class="code" href="idmac_8h.html#a0">min</a> = <a class="code" href="imamax_8c.html#a6">IdImaMinima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00226    <a class="code" href="idmac_8h.html#a1">max</a> = <a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00227    <span class="keywordflow">if</span> (<a class="code" href="idmac_8h.html#a1">max</a>!=<a class="code" href="idmac_8h.html#a0">min</a>)
00228     {
00229      <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00230         imauchar[i][j]= (<span class="keywordtype">int</span>)((imashort[i][j]-<a class="code" href="idmac_8h.html#a0">min</a>)/(<a class="code" href="idmac_8h.html#a1">max</a>-<a class="code" href="idmac_8h.html#a0">min</a>)*255);
00231     }
00232     <span class="keywordflow">else</span> 
00233     {
00234         <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00235         imauchar[i][j]= (<span class="keywordtype">int</span>) <a class="code" href="idmac_8h.html#a0">min</a>;
00236     }
00237     strcpy(txt,visuname);
00238     strcat(txt,<span class="stringliteral">"-T1 fat"</span>);
00239    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(imauchar,txt);
00240    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(imauchar);  
00241    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)  <span class="comment">/* T2 */</span>
00242        imashort[j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a6">T2</a>+3][0][j][i];
00243    <a class="code" href="idmac_8h.html#a0">min</a> = <a class="code" href="imamax_8c.html#a6">IdImaMinima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00244    <a class="code" href="idmac_8h.html#a1">max</a> = <a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00245    <span class="keywordflow">if</span> (<a class="code" href="idmac_8h.html#a1">max</a>!=<a class="code" href="idmac_8h.html#a0">min</a>)
00246     {
00247      <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00248         imauchar[i][j]= (<span class="keywordtype">int</span>)((imashort[i][j]-<a class="code" href="idmac_8h.html#a0">min</a>)/(<a class="code" href="idmac_8h.html#a1">max</a>-<a class="code" href="idmac_8h.html#a0">min</a>)*255);
00249     }
00250     <span class="keywordflow">else</span> 
00251     {
00252         <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00253         imauchar[i][j]= (<span class="keywordtype">int</span>) <a class="code" href="idmac_8h.html#a0">min</a>;
00254     }
00255     strcpy(txt,visuname);
00256     strcat(txt,<span class="stringliteral">"-T2 fat"</span>);
00257    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(imauchar,txt);
00258    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(imauchar);  
00259    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)  <span class="comment">/* RO */</span>
00260        imashort[j][i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[<a class="code" href="object_8h.html#a4">RO</a>+3][0][j][i];
00261    <a class="code" href="idmac_8h.html#a0">min</a> = <a class="code" href="imamax_8c.html#a6">IdImaMinima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00262    <a class="code" href="idmac_8h.html#a1">max</a> = <a class="code" href="imamax_8c.html#a7">IdImaMaxima</a>((<a class="code" href="idima-ido_8h.html#a23">PPIMAGE</a>)imashort);
00263    <span class="keywordflow">if</span> (<a class="code" href="idmac_8h.html#a1">max</a>!=<a class="code" href="idmac_8h.html#a0">min</a>)
00264     {
00265      <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00266         imauchar[i][j]= (<span class="keywordtype">int</span>)((imashort[i][j]-<a class="code" href="idmac_8h.html#a0">min</a>)/(<a class="code" href="idmac_8h.html#a1">max</a>-<a class="code" href="idmac_8h.html#a0">min</a>)*255);
00267     }
00268     <span class="keywordflow">else</span> 
00269     {
00270         <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) <span class="keywordflow">for</span>(j=0;j&lt;y;j++)
00271         imauchar[i][j]= (<span class="keywordtype">int</span>) <a class="code" href="idmac_8h.html#a0">min</a>;
00272     }
00273     strcpy(txt,visuname);
00274     strcat(txt,<span class="stringliteral">"-RO fat"</span>);
00275    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(imauchar,txt);
00276    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(imauchar);  
00277 }
00278    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(imauchar);
00279    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(imashort);
00280 }
00281 
00282 
<a name="l00289"></a><a class="code" href="group__Display.html#ga3">00289</a> <span class="keywordtype">void</span> <a class="code" href="group__Display.html#ga3">DisplayObject1D</a> (OBJECT3D* object, <span class="keywordtype">char</span>* visuname)
00290 {
00291    <span class="keywordtype">int</span> i;
00292    <span class="keywordtype">int</span> <a class="code" href="jerror_8h.html#a52a35">x</a>,y,z;
00293    <a class="code" href="idsig-ido_8h.html#a33">PSIGNAL_USHORT</a> sig;
00294    <a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a> ima;
00295    <span class="keywordtype">char</span> txt[80];
00296 
00297     txt[0]=<span class="charliteral">'\0'</span>;
00298 
00299    <a class="code" href="jerror_8h.html#a52a35">x</a>=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;x;
00300     y=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;y;
00301    z=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;z;
00302 
00303    <span class="keywordflow">if</span> ((y!=1)||(z!=1))
00304       printf(<span class="stringliteral">"Watchout ! Your object is not 1D \n!"</span>);
00305    
00306    sig = (<a class="code" href="idsig-ido_8h.html#a33">PSIGNAL_USHORT</a>) <a class="code" href="sigallo_8c.html#a1">IdSigAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,<a class="code" href="idsig-ido_8h.html#a3">SIG_USHORT</a>);
00307    <span class="keywordflow">if</span> (!sig)
00308      {
00309       printf(<span class="stringliteral">"Unable to allocate sig in DisplayObject1D !\n"</span>);
00310       exit(0);
00311      }
00312 
00313    <span class="comment">/* Display the first component considered to be water */</span>
00314     <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)  <span class="comment">/* T1 */</span>
00315         sig[i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[1][0][0][i];
00316    ima=<a class="code" href="sigtoima_8c.html#a2">IdImaSignalToImage</a>(sig,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,0,-1,-1,<a class="code" href="jerror_8h.html#a52a35">x</a>,128,255,0);
00317     strcpy(txt,visuname);
00318     strcat(txt,<span class="stringliteral">"-T1 Water"</span>);
00319    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,txt);
00320    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima); 
00321    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00322    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)  <span class="comment">/* T2 */</span>
00323         sig[i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[2][0][0][i];
00324    ima=<a class="code" href="sigtoima_8c.html#a2">IdImaSignalToImage</a>(sig,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,0,-1,-1,<a class="code" href="jerror_8h.html#a52a35">x</a>,128,255,0);;
00325     strcpy(txt,visuname);
00326     strcat(txt,<span class="stringliteral">"-T2 Water"</span>);
00327    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,txt);
00328    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima); 
00329    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00330    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)  <span class="comment">/* RO */</span>
00331         sig[i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[0][0][0][i];
00332     ima=<a class="code" href="sigtoima_8c.html#a2">IdImaSignalToImage</a>(sig,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,0,-1,-1,<a class="code" href="jerror_8h.html#a52a35">x</a>,128,255,0);
00333     strcpy(txt,visuname);
00334     strcat(txt,<span class="stringliteral">"-RO Water"</span>);
00335    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,txt);
00336    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima); 
00337    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00338 
00339    <span class="comment">/* Display the second component considered to be fat */</span>
00340     <span class="keywordflow">if</span> (<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;nbcomponent&gt;1)
00341    {
00342     <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)  <span class="comment">/* T1 */</span>
00343         sig[i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[4][0][0][i];
00344    ima=<a class="code" href="sigtoima_8c.html#a2">IdImaSignalToImage</a>(sig,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,0,-1,-1,<a class="code" href="jerror_8h.html#a52a35">x</a>,128,255,0);
00345     strcpy(txt,visuname);
00346     strcat(txt,<span class="stringliteral">"-T1 Fat"</span>);
00347    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,txt);
00348    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima); 
00349    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00350    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)  <span class="comment">/* T2 */</span>
00351         sig[i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[5][0][0][i];
00352    ima=<a class="code" href="sigtoima_8c.html#a2">IdImaSignalToImage</a>(sig,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,0,-1,-1,<a class="code" href="jerror_8h.html#a52a35">x</a>,128,255,0);
00353     strcpy(txt,visuname);
00354     strcat(txt,<span class="stringliteral">"-T2 Fat"</span>);
00355    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,txt);
00356    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima); 
00357    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00358    <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++)  <span class="comment">/* RO */</span>
00359         sig[i]=<a class="code" href="jmemsys_8h.html#a3">object</a>-&gt;values[3][0][0][i];
00360     ima=<a class="code" href="sigtoima_8c.html#a2">IdImaSignalToImage</a>(sig,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,0,-1,-1,<a class="code" href="jerror_8h.html#a52a35">x</a>,128,255,0);
00361     strcpy(txt,visuname);
00362     strcat(txt,<span class="stringliteral">"-RO Fat"</span>);
00363    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,txt);
00364    <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima); 
00365    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00366     }
00367 
00368    <a class="code" href="idsig-base_8h.html#a0">IdSigFree</a>(sig);
00369 }
00370 
<a name="l00385"></a><a class="code" href="group__Display.html#ga4">00385</a> <span class="keywordtype">void</span> <a class="code" href="group__Display.html#ga4">DisplayVol</a> (PPPVOLUME vol,<span class="keywordtype">int</span> deb, <span class="keywordtype">int</span> nb, <span class="keywordtype">int</span> recad, <span class="keywordtype">int</span> N, <span class="keywordtype">char</span> *visuname, <span class="keywordtype">int</span> save, <span class="keywordtype">char</span> *filename)
00386 {
00387  <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> uchar;
00388  <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> ushort;
00389  <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> ulong;
00390  <span class="keywordtype">char</span>             blabla[400];
00391  <span class="keywordtype">int</span>              X,Y,Z;
00392  <a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>  voluchar;
00393  <a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>    ima;
00394  <span class="keywordtype">int</span>              i,j,k;
00395  <span class="keywordtype">int</span>              nbx,nby;
00396  <span class="keywordtype">int</span>              dimx,dimy;
00397  <span class="keywordtype">int</span>              <a class="code" href="jerror_8h.html#a52a35">x</a>,y,compt;
00398  <span class="keywordtype">double</span>           mini,maxi;
00399  <span class="keywordtype">double</span>           <a class="code" href="jpeglib_8h.html#a64">val</a>;
00400 
00401  blabla[0]=<span class="charliteral">'\0'</span>;
00402 
00403  X=<a class="code" href="idvol-ido_8h.html#a21">IdVolDimX</a>(vol); Y=<a class="code" href="idvol-ido_8h.html#a22">IdVolDimY</a>(vol); Z=<a class="code" href="idvol-ido_8h.html#a23">IdVolDimZ</a>(vol);
00404 
00405  voluchar = (<a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>) <a class="code" href="volallo_8c.html#a1">IdVolAlloc</a>(X,Y,Z,<a class="code" href="idvol-ido_8h.html#a1">VOL_UCHAR</a>);
00406  <span class="keywordflow">if</span>(!voluchar)
00407   {
00408    printf(<span class="stringliteral">"Allocation failure of voluchar in DisplayVol !\n"</span>);
00409    exit(0);
00410   }
00411 
00412 <span class="preprocessor">#define ABSO 1</span>
00413 <span class="preprocessor"></span><span class="preprocessor">#define LOG 2</span>
00414 <span class="preprocessor"></span>
00415 <span class="preprocessor">#define RABS(type,tt) for(k=0;k&lt;Z;k++) for(j=0;j&lt;Y;j++) for(i=0;i&lt;X;i++) \</span>
00416 <span class="preprocessor">                       ((type)vol)[k][j][i] = (tt) fabs((double)((type)vol)[k][j][i]);  </span>
00417 <span class="preprocessor"></span>
00418 <span class="preprocessor">#define RLOG(type,tt) for(k=0;k&lt;Z;k++) for(j=0;j&lt;Y;j++) for(i=0;i&lt;X;i++) \</span>
00419 <span class="preprocessor">                       ((type)vol)[k][j][i] = (tt) log(1.0+fabs((double)((type)vol)[k][j][i]));  </span>
00420 <span class="preprocessor"></span>
00421 <span class="preprocessor">#define RECAD(type) for(k=0;k&lt;Z;k++) for(j=0;j&lt;Y;j++) for(i=0;i&lt;X;i++) \</span>
00422 <span class="preprocessor">                       {   \</span>
00423 <span class="preprocessor">                   val = (double) ((type)vol)[k][j][i];  \</span>
00424 <span class="preprocessor">                        val = (val-mini) / (maxi-mini) * N; \</span>
00425 <span class="preprocessor">                  if (val&gt;255.0) val = 255.0;   \</span>
00426 <span class="preprocessor">                  voluchar[k][j][i]=(unsigned char) val; \</span>
00427 <span class="preprocessor">                  }</span>
00428 <span class="preprocessor"></span><span class="keywordflow">if</span> (recad==<a class="code" href="display_8c.html#a0">ABSO</a>)
00429  {
00430   <span class="keywordflow">switch</span>(<a class="code" href="idvol-ido_8h.html#a33">IdVolType</a>(vol))
00431    { 
00432     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a1">VOL_UCHAR</a>:
00433     {
00434      <a class="code" href="display_8c.html#a2">RABS</a>(<a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>,uchar);
00435     }
00436     <span class="keywordflow">break</span>;
00437     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a3">VOL_USHORT</a>:
00438     {
00439    <a class="code" href="display_8c.html#a2">RABS</a>(<a class="code" href="idvol-ido_8h.html#a42">PPPVOLUME_USHORT</a>,ushort);
00440     }
00441     <span class="keywordflow">break</span>;
00442     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a2">VOL_SHORT</a>:
00443     {
00444    <a class="code" href="display_8c.html#a2">RABS</a>(<a class="code" href="idvol-ido_8h.html#a41">PPPVOLUME_SHORT</a>,<span class="keywordtype">short</span>);
00445     }
00446     <span class="keywordflow">break</span>;
00447     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a5">VOL_ULONG</a>:
00448     {
00449    <a class="code" href="display_8c.html#a2">RABS</a>(<a class="code" href="idvol-ido_8h.html#a44">PPPVOLUME_ULONG</a>,ulong);
00450     }
00451     <span class="keywordflow">break</span>;
00452     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a4">VOL_LONG</a>:
00453     {
00454    <a class="code" href="display_8c.html#a2">RABS</a>(<a class="code" href="idvol-ido_8h.html#a43">PPPVOLUME_LONG</a>,<span class="keywordtype">long</span>);
00455     }
00456     <span class="keywordflow">break</span>;
00457     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a6">VOL_FLOAT</a>:
00458     {
00459    <a class="code" href="display_8c.html#a2">RABS</a>(<a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a>,<span class="keywordtype">float</span>);
00460     }
00461     <span class="keywordflow">break</span>;
00462     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a7">VOL_DOUBLE</a>:
00463     {
00464    <a class="code" href="display_8c.html#a2">RABS</a>(<a class="code" href="idvol-ido_8h.html#a38">PPPVOLUME_DOUBLE</a>,<span class="keywordtype">double</span>);
00465     }
00466     <span class="keywordflow">break</span>;
00467     <span class="keywordflow">default</span>:
00468     {
00469      printf(<span class="stringliteral">"This Volume type is not supported by DisplayVol !\n"</span>);
00470      exit(0);
00471     }
00472     <span class="keywordflow">break</span>;
00473    }
00474   }
00475 
00476 <span class="keywordflow">if</span> (recad==<a class="code" href="display_8c.html#a1">LOG</a>)
00477  {
00478   <span class="keywordflow">switch</span>(<a class="code" href="idvol-ido_8h.html#a33">IdVolType</a>(vol))
00479    { 
00480     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a1">VOL_UCHAR</a>:
00481     {
00482      <a class="code" href="display_8c.html#a3">RLOG</a>(<a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>,uchar);
00483     }
00484     <span class="keywordflow">break</span>;
00485     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a3">VOL_USHORT</a>:
00486     {
00487    <a class="code" href="display_8c.html#a3">RLOG</a>(<a class="code" href="idvol-ido_8h.html#a42">PPPVOLUME_USHORT</a>,ushort);
00488     }
00489     <span class="keywordflow">break</span>;
00490     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a2">VOL_SHORT</a>:
00491     {
00492    <a class="code" href="display_8c.html#a3">RLOG</a>(<a class="code" href="idvol-ido_8h.html#a41">PPPVOLUME_SHORT</a>,<span class="keywordtype">short</span>);
00493     }
00494     <span class="keywordflow">break</span>;
00495     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a5">VOL_ULONG</a>:
00496     {
00497    <a class="code" href="display_8c.html#a3">RLOG</a>(<a class="code" href="idvol-ido_8h.html#a44">PPPVOLUME_ULONG</a>,ulong);
00498     }
00499     <span class="keywordflow">break</span>;
00500     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a4">VOL_LONG</a>:
00501     {
00502    <a class="code" href="display_8c.html#a3">RLOG</a>(<a class="code" href="idvol-ido_8h.html#a43">PPPVOLUME_LONG</a>,<span class="keywordtype">long</span>);
00503     }
00504     <span class="keywordflow">break</span>;
00505     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a6">VOL_FLOAT</a>:
00506     {
00507    <a class="code" href="display_8c.html#a3">RLOG</a>(<a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a>,<span class="keywordtype">float</span>);
00508     }
00509     <span class="keywordflow">break</span>;
00510     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a7">VOL_DOUBLE</a>:
00511     {
00512    <a class="code" href="display_8c.html#a3">RLOG</a>(<a class="code" href="idvol-ido_8h.html#a38">PPPVOLUME_DOUBLE</a>,<span class="keywordtype">double</span>);
00513     }
00514     <span class="keywordflow">break</span>;
00515     <span class="keywordflow">default</span>:
00516     {
00517      printf(<span class="stringliteral">"This Volume type is not supported by DisplayVol !\n"</span>);
00518      exit(0);
00519     }
00520     <span class="keywordflow">break</span>;
00521    }
00522   }
00523 
00524  mini = <a class="code" href="volmin_8c.html#a7">IdVolMinima</a>(vol); maxi = <a class="code" href="volmax_8c.html#a11">IdVolMaxima</a>(vol); 
00525  
00526   <span class="keywordflow">switch</span>(<a class="code" href="idvol-ido_8h.html#a33">IdVolType</a>(vol))
00527    { 
00528     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a1">VOL_UCHAR</a>:
00529     {
00530      <a class="code" href="display_8c.html#a4">RECAD</a>(<a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>);
00531     }
00532     <span class="keywordflow">break</span>;
00533     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a3">VOL_USHORT</a>:
00534     {
00535    <a class="code" href="display_8c.html#a4">RECAD</a>(<a class="code" href="idvol-ido_8h.html#a42">PPPVOLUME_USHORT</a>);
00536     }
00537     <span class="keywordflow">break</span>;
00538     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a2">VOL_SHORT</a>:
00539     {
00540    <a class="code" href="display_8c.html#a4">RECAD</a>(<a class="code" href="idvol-ido_8h.html#a41">PPPVOLUME_SHORT</a>);
00541     }
00542     <span class="keywordflow">break</span>;
00543     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a5">VOL_ULONG</a>:
00544     {
00545    <a class="code" href="display_8c.html#a4">RECAD</a>(<a class="code" href="idvol-ido_8h.html#a44">PPPVOLUME_ULONG</a>);
00546     }
00547     <span class="keywordflow">break</span>;
00548     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a4">VOL_LONG</a>:
00549     {
00550    <a class="code" href="display_8c.html#a4">RECAD</a>(<a class="code" href="idvol-ido_8h.html#a43">PPPVOLUME_LONG</a>);
00551     }
00552     <span class="keywordflow">break</span>;
00553     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a6">VOL_FLOAT</a>:
00554     {
00555    <a class="code" href="display_8c.html#a4">RECAD</a>(<a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a>);
00556     }
00557     <span class="keywordflow">break</span>;
00558     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a7">VOL_DOUBLE</a>:
00559     {
00560    <a class="code" href="display_8c.html#a4">RECAD</a>(<a class="code" href="idvol-ido_8h.html#a38">PPPVOLUME_DOUBLE</a>);
00561     }
00562     <span class="keywordflow">break</span>;
00563     <span class="keywordflow">default</span>:
00564     {
00565      printf(<span class="stringliteral">"This Volume type is not supported by DisplayVol!\n"</span>);
00566      exit(0);
00567     }
00568     <span class="keywordflow">break</span>;
00569    }
00570 
00571  <span class="keywordflow">if</span> (nb+<a class="code" href="imalabel_8c.html#a3">deb</a>&gt;Z)
00572    {
00573     printf(<span class="stringliteral">"Nb &gt; profondeur du volume !!! \n"</span>);
00574     exit(0);
00575    }
00576 
00577  nbx = (<span class="keywordtype">int</span>) floor(sqrt((<span class="keywordtype">double</span>)nb));
00578  nby = nbx;
00579  dimx = nbx * X;
00580  dimy = nby * Y;
00581 
00582  ima = (<a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a>) <a class="code" href="imaallo_8c.html#a9">IdImaAlloc</a>(dimx,dimy,<a class="code" href="idima-ido_8h.html#a1">IMA_UCHAR</a>);
00583  <span class="keywordflow">if</span> (!ima)
00584    {
00585     printf(<span class="stringliteral">"Impossible d'allouer l'image de visu !\n"</span>);
00586     exit(0);
00587    }
00588  <span class="keywordflow">for</span> (i=0;i&lt;dimy;i++) <span class="keywordflow">for</span>(j=0;j&lt;dimx;j++)
00589     ima[i][j]=0;
00590  compt = <a class="code" href="imalabel_8c.html#a3">deb</a>;
00591  <span class="keywordflow">for</span> (y=0;y&lt;nby;y++) <span class="keywordflow">for</span> (<a class="code" href="jerror_8h.html#a52a35">x</a>=0;<a class="code" href="jerror_8h.html#a52a35">x</a>&lt;nbx;<a class="code" href="jerror_8h.html#a52a35">x</a>++)
00592    {
00593     <span class="keywordflow">if</span> (compt&lt;nb+<a class="code" href="imalabel_8c.html#a3">deb</a>)
00594       {
00595        <span class="keywordflow">for</span>(i=0;i&lt;Y;i++) <span class="keywordflow">for</span>(j=0;j&lt;X;j++)
00596      ima[i+y*Y][j+<a class="code" href="jerror_8h.html#a52a35">x</a>*X] = voluchar[compt][i][j];
00597       }
00598     compt++;
00599    }
00600  <a class="code" href="idvol_8h.html#a41">IdVolFree</a>(voluchar);
00601  sprintf(blabla,<span class="stringliteral">" %d -&gt; %d"</span>,<a class="code" href="imalabel_8c.html#a3">deb</a>,<a class="code" href="imalabel_8c.html#a3">deb</a>+nb-1);
00602  strcat(blabla,visuname);
00603  <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,visuname);
00604  <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima);   
00605  <span class="keywordflow">if</span> (save==1)
00606    <a class="code" href="idacr_8h.html#a75">IdAcrWriteFile</a>(filename,ima);
00607  <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00608 }
00609 
<a name="l00618"></a><a class="code" href="group__Display.html#ga5">00618</a> <span class="keywordtype">void</span> <a class="code" href="group__Display.html#ga5">DisplayVolXY</a> (PPPVOLUME vol,<span class="keywordtype">int</span> z,<span class="keywordtype">char</span> *visuname)
00619 {
00620  <a class="code" href="group__Display.html#ga4">DisplayVol</a>(vol,z,1,0,255,visuname,0,<span class="stringliteral">"\0"</span>);
00621 }
00622 
<a name="l00634"></a><a class="code" href="group__Display.html#ga6">00634</a> <span class="keywordtype">void</span> <a class="code" href="group__Display.html#ga6">DisplayVolX</a> (PPPVOLUME vol,<span class="keywordtype">int</span> y,<span class="keywordtype">int</span> z,<span class="keywordtype">char</span> *visuname,<span class="keywordtype">int</span> save,<span class="keywordtype">char</span> *filename)
00635 {
00636    <span class="keywordtype">int</span> i;
00637    <span class="keywordtype">int</span> <a class="code" href="jerror_8h.html#a52a35">x</a>;
00638    <a class="code" href="idsig-ido_8h.html#a29">PSIGNAL_DOUBLE</a> sig;
00639    <a class="code" href="idima-ido_8h.html#a25">PPIMAGE_UCHAR</a> ima;
00640    <span class="keywordtype">char</span> txt[80];
00641 
00642    txt[0]=<span class="charliteral">'\0'</span>;
00643    sprintf(txt,<span class="stringliteral">"-Y:%d-Z:%d"</span>,y,z);
00644    strcat(txt,visuname);
00645    
00646    <a class="code" href="jerror_8h.html#a52a35">x</a>=<a class="code" href="idvol-ido_8h.html#a21">IdVolDimX</a>(vol);
00647 
00648    sig = (<a class="code" href="idsig-ido_8h.html#a29">PSIGNAL_DOUBLE</a>) <a class="code" href="sigallo_8c.html#a1">IdSigAlloc</a>(<a class="code" href="jerror_8h.html#a52a35">x</a>,<a class="code" href="idsig-ido_8h.html#a7">SIG_DOUBLE</a>);
00649    <span class="keywordflow">if</span> (!sig)
00650      {
00651       printf(<span class="stringliteral">"Impossible d'allouer sig !\n"</span>);
00652       exit(0);
00653      }
00654    <span class="keywordflow">switch</span> (<a class="code" href="idvol-ido_8h.html#a33">IdVolType</a>(vol)) 
00655    {
00656      <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a7">VOL_DOUBLE</a>:
00657       <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) sig[i]= (<span class="keywordtype">double</span>) ((<a class="code" href="idvol-ido_8h.html#a38">PPPVOLUME_DOUBLE</a>)vol)[z][y][i];
00658      <span class="keywordflow">break</span>;
00659      <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a6">VOL_FLOAT</a>:
00660       <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) 
00661      {
00662         sig[i]= (<span class="keywordtype">double</span>) ((<a class="code" href="idvol-ido_8h.html#a37">PPPVOLUME_FLOAT</a>)vol)[z][y][i];
00663      }
00664      <span class="keywordflow">break</span>;
00665     <span class="keywordflow">case</span> <a class="code" href="idvol-ido_8h.html#a1">VOL_UCHAR</a>:
00666       <span class="keywordflow">for</span> (i=0;i&lt;<a class="code" href="jerror_8h.html#a52a35">x</a>;i++) sig[i]= (<span class="keywordtype">double</span>) ((<a class="code" href="idvol-ido_8h.html#a36">PPPVOLUME_UCHAR</a>)vol)[z][y][i];
00667      <span class="keywordflow">break</span>;
00668     <span class="keywordflow">default</span>:
00669     { 
00670      printf(<span class="stringliteral">"Volume type not yet managed !\n"</span>);
00671      exit(0);
00672     }
00673     <span class="keywordflow">break</span>;
00674    }
00675    printf(<span class="stringliteral">"sig[0]=%lf \n"</span>,sig[0]);
00676    printf(<span class="stringliteral">"sig[%d]=%lf \n"</span>,<a class="code" href="jerror_8h.html#a52a35">x</a>/4,sig[<a class="code" href="jerror_8h.html#a52a35">x</a>/4]);
00677    printf(<span class="stringliteral">"sig[%d]=%lf \n"</span>,<a class="code" href="jerror_8h.html#a52a35">x</a>/2-1,sig[<a class="code" href="jerror_8h.html#a52a35">x</a>/2-1]);
00678    printf(<span class="stringliteral">"sig[%d]=%lf \n"</span>,<a class="code" href="jerror_8h.html#a52a35">x</a>/2,sig[<a class="code" href="jerror_8h.html#a52a35">x</a>/2]);
00679    printf(<span class="stringliteral">"sig[%d]=%lf \n"</span>,<a class="code" href="jerror_8h.html#a52a35">x</a>/2+1,sig[<a class="code" href="jerror_8h.html#a52a35">x</a>/2+1]);
00680    printf(<span class="stringliteral">"sig[%d]=%lf \n"</span>,<a class="code" href="jerror_8h.html#a52a35">x</a>-1,sig[<a class="code" href="jerror_8h.html#a52a35">x</a>-1]);
00681    
00682    <span class="keywordflow">if</span> (save==1) <a class="code" href="sigwrf_8c.html#a0">IdSigWriteRawFile</a>(filename,(<a class="code" href="idsig-ido_8h.html#a25">PSIGNAL</a>) sig);
00683 
00684    ima=<a class="code" href="sigtoima_8c.html#a2">IdImaSignalToImage</a>(sig,0,<a class="code" href="jerror_8h.html#a52a35">x</a>,0,-1,-1,<a class="code" href="jerror_8h.html#a52a35">x</a>,128,255,0);
00685    <a class="code" href="idsig-base_8h.html#a0">IdSigFree</a>(sig);
00686    <a class="code" href="kernomfic_8c.html#a1">IdSetFileName</a>(ima,txt);
00687     <a class="code" href="group__Display.html#ga0">DisplayImage2D</a>(ima);   
00688    <a class="code" href="idima-base_8h.html#a0">IdImaFree</a>(ima);
00689 }
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 20 14:28:13 2006 for SIMRI3D by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7 </small></address>
</body>
</html>
